<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/Microsoft/ApplicationInsights-node.js#readme"

    >applicationinsights (v0.19.0)</a>
</h1>
<h4>Microsoft Application Insights module for Node.JS</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights">module applicationinsights</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">applicationinsights.</span>_isConsole</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">applicationinsights.</span>_isCorrelating</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">applicationinsights.</span>_isDependencies</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">applicationinsights.</span>_isExceptions</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">applicationinsights.</span>_isOfflineMode</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">applicationinsights.</span>_isPerformance</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">applicationinsights.</span>_isRequests</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">applicationinsights.</span>_isStarted</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.applicationinsights">
            function <span class="apidocSignatureSpan"></span>applicationinsights
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Channel">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Channel
            <span class="apidocSignatureSpan">(isDisabled, getBatchSize, getBatchIntervalMs, sender)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Client
            <span class="apidocSignatureSpan">(iKey)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequestParser">
            function <span class="apidocSignatureSpan">applicationinsights.</span>ClientRequestParser
            <span class="apidocSignatureSpan">(requestOptions, request)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequests">
            function <span class="apidocSignatureSpan">applicationinsights.</span>ClientRequests
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Config">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Config
            <span class="apidocSignatureSpan">(instrumentationKey)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Console">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Console
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Context">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Context
            <span class="apidocSignatureSpan">(packageJsonPath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Exceptions">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Exceptions
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Logging">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Logging
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Performance">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Performance
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.RequestParser">
            function <span class="apidocSignatureSpan">applicationinsights.</span>RequestParser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Sender">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Sender
            <span class="apidocSignatureSpan">(getUrl, onSuccess, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser">
            function <span class="apidocSignatureSpan">applicationinsights.</span>ServerRequestParser
            <span class="apidocSignatureSpan">(request, requestId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests">
            function <span class="apidocSignatureSpan">applicationinsights.</span>ServerRequests
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Util
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.disableConsoleLogging">
            function <span class="apidocSignatureSpan">applicationinsights.</span>disableConsoleLogging
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.dispose">
            function <span class="apidocSignatureSpan">applicationinsights.</span>dispose
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.enableVerboseLogging">
            function <span class="apidocSignatureSpan">applicationinsights.</span>enableVerboseLogging
            <span class="apidocSignatureSpan">(enableWarningLogging)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.getClient">
            function <span class="apidocSignatureSpan">applicationinsights.</span>getClient
            <span class="apidocSignatureSpan">(instrumentationKey)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.getCorrelationContext">
            function <span class="apidocSignatureSpan">applicationinsights.</span>getCorrelationContext
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.setAutoCollectConsole">
            function <span class="apidocSignatureSpan">applicationinsights.</span>setAutoCollectConsole
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.setAutoCollectDependencies">
            function <span class="apidocSignatureSpan">applicationinsights.</span>setAutoCollectDependencies
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.setAutoCollectExceptions">
            function <span class="apidocSignatureSpan">applicationinsights.</span>setAutoCollectExceptions
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.setAutoCollectPerformance">
            function <span class="apidocSignatureSpan">applicationinsights.</span>setAutoCollectPerformance
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.setAutoCollectRequests">
            function <span class="apidocSignatureSpan">applicationinsights.</span>setAutoCollectRequests
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.setAutoDependencyCorrelation">
            function <span class="apidocSignatureSpan">applicationinsights.</span>setAutoDependencyCorrelation
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.setOfflineMode">
            function <span class="apidocSignatureSpan">applicationinsights.</span>setOfflineMode
            <span class="apidocSignatureSpan">(value, resendInterval)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.setup">
            function <span class="apidocSignatureSpan">applicationinsights.</span>setup
            <span class="apidocSignatureSpan">(instrumentationKey)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.start">
            function <span class="apidocSignatureSpan">applicationinsights.</span>start
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.wrapWithCorrelationContext">
            function <span class="apidocSignatureSpan">applicationinsights.</span>wrapWithCorrelationContext
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>Channel.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>Client.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>ClientRequestParser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>ClientRequests.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>Console.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>Context.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>CorrelationContextManager</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>Exceptions.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>Performance.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>RequestParser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>Sender.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>ServerRequestParser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.</span>ServerRequests.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Channel">module applicationinsights.Channel</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Channel.Channel">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Channel
            <span class="apidocSignatureSpan">(isDisabled, getBatchSize, getBatchIntervalMs, sender)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Channel.prototype">module applicationinsights.Channel.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Channel.prototype._stringify">
            function <span class="apidocSignatureSpan">applicationinsights.Channel.prototype.</span>_stringify
            <span class="apidocSignatureSpan">(envelope)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Channel.prototype.handleCrash">
            function <span class="apidocSignatureSpan">applicationinsights.Channel.prototype.</span>handleCrash
            <span class="apidocSignatureSpan">(envelope)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Channel.prototype.send">
            function <span class="apidocSignatureSpan">applicationinsights.Channel.prototype.</span>send
            <span class="apidocSignatureSpan">(envelope)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Channel.prototype.setOfflineMode">
            function <span class="apidocSignatureSpan">applicationinsights.Channel.prototype.</span>setOfflineMode
            <span class="apidocSignatureSpan">(value, resendInterval)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Channel.prototype.triggerSend">
            function <span class="apidocSignatureSpan">applicationinsights.Channel.prototype.</span>triggerSend
            <span class="apidocSignatureSpan">(isNodeCrashing, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Client">module applicationinsights.Client</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.Client">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Client
            <span class="apidocSignatureSpan">(iKey)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Client.prototype">module applicationinsights.Client.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.addTelemetryProcessor">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>addTelemetryProcessor
            <span class="apidocSignatureSpan">(telemetryProcessor)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.clearTelemetryProcessors">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>clearTelemetryProcessors
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.getEnvelope">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>getEnvelope
            <span class="apidocSignatureSpan">(data, tagOverrides)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.getTags">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>getTags
            <span class="apidocSignatureSpan">(tagOverrides)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.runTelemetryProcessors">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>runTelemetryProcessors
            <span class="apidocSignatureSpan">(envelope, contextObjects)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.sendPendingData">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>sendPendingData
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.track">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>track
            <span class="apidocSignatureSpan">(data, tagOverrides, contextObjects)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.trackDependency">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackDependency
            <span class="apidocSignatureSpan">(name, commandName, elapsedTimeMs, success, dependencyTypeName, properties, async, target)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.trackDependencyRequest">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackDependencyRequest
            <span class="apidocSignatureSpan">(requestOptions, request, properties)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.trackEvent">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackEvent
            <span class="apidocSignatureSpan">(name, properties, measurements)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.trackException">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackException
            <span class="apidocSignatureSpan">(exception, properties, measurements)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.trackMetric">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackMetric
            <span class="apidocSignatureSpan">(name, value, count, min, max, stdDev, properties)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.trackRequest">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackRequest
            <span class="apidocSignatureSpan">(request, response, properties)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.trackRequestSync">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackRequestSync
            <span class="apidocSignatureSpan">(request, response, ellapsedMilliseconds, properties, error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Client.prototype.trackTrace">
            function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackTrace
            <span class="apidocSignatureSpan">(message, severityLevel, properties)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.ClientRequestParser">module applicationinsights.ClientRequestParser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequestParser.ClientRequestParser">
            function <span class="apidocSignatureSpan">applicationinsights.</span>ClientRequestParser
            <span class="apidocSignatureSpan">(requestOptions, request)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequestParser._getUrlFromRequestOptions">
            function <span class="apidocSignatureSpan">applicationinsights.ClientRequestParser.</span>_getUrlFromRequestOptions
            <span class="apidocSignatureSpan">(options, request)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.ClientRequestParser.prototype">module applicationinsights.ClientRequestParser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequestParser.prototype.constructor">
            function <span class="apidocSignatureSpan">applicationinsights.ClientRequestParser.prototype.</span>constructor
            <span class="apidocSignatureSpan">(requestOptions, request)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequestParser.prototype.getDependencyData">
            function <span class="apidocSignatureSpan">applicationinsights.ClientRequestParser.prototype.</span>getDependencyData
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequestParser.prototype.onError">
            function <span class="apidocSignatureSpan">applicationinsights.ClientRequestParser.prototype.</span>onError
            <span class="apidocSignatureSpan">(error, properties)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequestParser.prototype.onResponse">
            function <span class="apidocSignatureSpan">applicationinsights.ClientRequestParser.prototype.</span>onResponse
            <span class="apidocSignatureSpan">(response, properties)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.ClientRequests">module applicationinsights.ClientRequests</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequests.ClientRequests">
            function <span class="apidocSignatureSpan">applicationinsights.</span>ClientRequests
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequests.trackRequest">
            function <span class="apidocSignatureSpan">applicationinsights.ClientRequests.</span>trackRequest
            <span class="apidocSignatureSpan">(client, requestOptions, request, properties)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">applicationinsights.ClientRequests.</span>disableCollectionRequestOption</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.ClientRequests.prototype">module applicationinsights.ClientRequests.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequests.prototype._initialize">
            function <span class="apidocSignatureSpan">applicationinsights.ClientRequests.prototype.</span>_initialize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequests.prototype.dispose">
            function <span class="apidocSignatureSpan">applicationinsights.ClientRequests.prototype.</span>dispose
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequests.prototype.enable">
            function <span class="apidocSignatureSpan">applicationinsights.ClientRequests.prototype.</span>enable
            <span class="apidocSignatureSpan">(isEnabled)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ClientRequests.prototype.isInitialized">
            function <span class="apidocSignatureSpan">applicationinsights.ClientRequests.prototype.</span>isInitialized
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Config">module applicationinsights.Config</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Config.Config">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Config
            <span class="apidocSignatureSpan">(instrumentationKey)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Config._getInstrumentationKey">
            function <span class="apidocSignatureSpan">applicationinsights.Config.</span>_getInstrumentationKey
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Config._getStringHashBase64">
            function <span class="apidocSignatureSpan">applicationinsights.Config.</span>_getStringHashBase64
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">applicationinsights.Config.</span>ENV_azurePrefix</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">applicationinsights.Config.</span>ENV_iKey</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">applicationinsights.Config.</span>legacy_ENV_iKey</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Console">module applicationinsights.Console</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Console.Console">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Console
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.Console.</span>_methodNames</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Console.prototype">module applicationinsights.Console.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Console.prototype.dispose">
            function <span class="apidocSignatureSpan">applicationinsights.Console.prototype.</span>dispose
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Console.prototype.enable">
            function <span class="apidocSignatureSpan">applicationinsights.Console.prototype.</span>enable
            <span class="apidocSignatureSpan">(isEnabled)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Console.prototype.isInitialized">
            function <span class="apidocSignatureSpan">applicationinsights.Console.prototype.</span>isInitialized
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Context">module applicationinsights.Context</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Context.Context">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Context
            <span class="apidocSignatureSpan">(packageJsonPath)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Context.prototype">module applicationinsights.Context.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Context.prototype._loadApplicationContext">
            function <span class="apidocSignatureSpan">applicationinsights.Context.prototype.</span>_loadApplicationContext
            <span class="apidocSignatureSpan">(packageJsonPath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Context.prototype._loadDeviceContext">
            function <span class="apidocSignatureSpan">applicationinsights.Context.prototype.</span>_loadDeviceContext
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Context.prototype._loadInternalContext">
            function <span class="apidocSignatureSpan">applicationinsights.Context.prototype.</span>_loadInternalContext
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.CorrelationContextManager">module applicationinsights.CorrelationContextManager</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.CorrelationContextManager.CorrelationContextManager">
            function <span class="apidocSignatureSpan">applicationinsights.</span>CorrelationContextManager
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Exceptions">module applicationinsights.Exceptions</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Exceptions.Exceptions">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Exceptions
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Exceptions.getExceptionData">
            function <span class="apidocSignatureSpan">applicationinsights.Exceptions.</span>getExceptionData
            <span class="apidocSignatureSpan">(error, isHandled, properties, measurements)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Exceptions.parseStack">
            function <span class="apidocSignatureSpan">applicationinsights.Exceptions.</span>parseStack
            <span class="apidocSignatureSpan">(stack)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.Exceptions.</span>INSTANCE</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Exceptions.prototype">module applicationinsights.Exceptions.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Exceptions.prototype.dispose">
            function <span class="apidocSignatureSpan">applicationinsights.Exceptions.prototype.</span>dispose
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Exceptions.prototype.enable">
            function <span class="apidocSignatureSpan">applicationinsights.Exceptions.prototype.</span>enable
            <span class="apidocSignatureSpan">(isEnabled)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Exceptions.prototype.isInitialized">
            function <span class="apidocSignatureSpan">applicationinsights.Exceptions.prototype.</span>isInitialized
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Logging">module applicationinsights.Logging</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">applicationinsights.Logging.</span>disableWarnings</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">applicationinsights.Logging.</span>enableDebug</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Logging.Logging">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Logging
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Logging.info">
            function <span class="apidocSignatureSpan">applicationinsights.Logging.</span>info
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Logging.warn">
            function <span class="apidocSignatureSpan">applicationinsights.Logging.</span>warn
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">applicationinsights.Logging.</span>TAG</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Performance">module applicationinsights.Performance</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Performance.Performance">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Performance
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Performance.countRequest">
            function <span class="apidocSignatureSpan">applicationinsights.Performance.</span>countRequest
            <span class="apidocSignatureSpan">(request, response)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">applicationinsights.Performance.</span>_lastRequestExecutionTime</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">applicationinsights.Performance.</span>_totalFailedRequestCount</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">applicationinsights.Performance.</span>_totalRequestCount</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Performance.prototype">module applicationinsights.Performance.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Performance.prototype._initialize">
            function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>_initialize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Performance.prototype._trackCpu">
            function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>_trackCpu
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Performance.prototype._trackLegacyPerformance">
            function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>_trackLegacyPerformance
            <span class="apidocSignatureSpan">(counterType, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Performance.prototype._trackMemory">
            function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>_trackMemory
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Performance.prototype._trackNetwork">
            function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>_trackNetwork
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Performance.prototype.dispose">
            function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>dispose
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Performance.prototype.enable">
            function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>enable
            <span class="apidocSignatureSpan">(isEnabled)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Performance.prototype.isInitialized">
            function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>isInitialized
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Performance.prototype.trackPerformance">
            function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>trackPerformance
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.RequestParser">module applicationinsights.RequestParser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.RequestParser.RequestParser">
            function <span class="apidocSignatureSpan">applicationinsights.</span>RequestParser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.RequestParser.prototype">module applicationinsights.RequestParser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.RequestParser.prototype.RequestParser">
            function <span class="apidocSignatureSpan">applicationinsights.RequestParser.prototype.</span>RequestParser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.RequestParser.prototype._isSuccess">
            function <span class="apidocSignatureSpan">applicationinsights.RequestParser.prototype.</span>_isSuccess
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.RequestParser.prototype._setStatus">
            function <span class="apidocSignatureSpan">applicationinsights.RequestParser.prototype.</span>_setStatus
            <span class="apidocSignatureSpan">(status, error, properties)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.RequestParser.prototype.getUrl">
            function <span class="apidocSignatureSpan">applicationinsights.RequestParser.prototype.</span>getUrl
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Sender">module applicationinsights.Sender</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Sender.Sender">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Sender
            <span class="apidocSignatureSpan">(getUrl, onSuccess, onError)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">applicationinsights.Sender.</span>WAIT_BETWEEN_RESEND</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">applicationinsights.Sender.</span>TAG</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">applicationinsights.Sender.</span>TEMPDIR</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Sender.prototype">module applicationinsights.Sender.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Sender.prototype._confirmDirExists">
            function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>_confirmDirExists
            <span class="apidocSignatureSpan">(direcotry, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Sender.prototype._onErrorHelper">
            function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>_onErrorHelper
            <span class="apidocSignatureSpan">(error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Sender.prototype._sendFirstFileOnDisk">
            function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>_sendFirstFileOnDisk
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Sender.prototype._storeToDisk">
            function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>_storeToDisk
            <span class="apidocSignatureSpan">(payload)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Sender.prototype._storeToDiskSync">
            function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>_storeToDiskSync
            <span class="apidocSignatureSpan">(payload)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Sender.prototype.saveOnCrash">
            function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>saveOnCrash
            <span class="apidocSignatureSpan">(payload)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Sender.prototype.send">
            function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>send
            <span class="apidocSignatureSpan">(payload, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Sender.prototype.setOfflineMode">
            function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>setOfflineMode
            <span class="apidocSignatureSpan">(value, resendInterval)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.ServerRequestParser">module applicationinsights.ServerRequestParser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.ServerRequestParser">
            function <span class="apidocSignatureSpan">applicationinsights.</span>ServerRequestParser
            <span class="apidocSignatureSpan">(request, requestId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.parseId">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.</span>parseId
            <span class="apidocSignatureSpan">(cookieValue)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.</span>keys</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.ServerRequestParser.prototype">module applicationinsights.ServerRequestParser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.prototype._getAbsoluteUrl">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>_getAbsoluteUrl
            <span class="apidocSignatureSpan">(request)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.prototype._getId">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>_getId
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.prototype._getIp">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>_getIp
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.constructor">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>constructor
            <span class="apidocSignatureSpan">(request, requestId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.getOperationId">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>getOperationId
            <span class="apidocSignatureSpan">(tags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.getOperationName">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>getOperationName
            <span class="apidocSignatureSpan">(tags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.getOperationParentId">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>getOperationParentId
            <span class="apidocSignatureSpan">(tags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.getRequestData">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>getRequestData
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.getRequestId">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>getRequestId
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.getRequestTags">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>getRequestTags
            <span class="apidocSignatureSpan">(tags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.onError">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>onError
            <span class="apidocSignatureSpan">(error, properties, ellapsedMilliseconds)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.onResponse">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>onResponse
            <span class="apidocSignatureSpan">(response, properties, ellapsedMilliseconds)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.ServerRequests">module applicationinsights.ServerRequests</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests.ServerRequests">
            function <span class="apidocSignatureSpan">applicationinsights.</span>ServerRequests
            <span class="apidocSignatureSpan">(client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests.addResponseIKeyHeader">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.</span>addResponseIKeyHeader
            <span class="apidocSignatureSpan">(client, response)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests.endRequest">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.</span>endRequest
            <span class="apidocSignatureSpan">(client, requestParser, request, response, ellapsedMilliseconds, properties, error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests.trackRequest">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.</span>trackRequest
            <span class="apidocSignatureSpan">(client, request, response, properties, _requestParser)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests.trackRequestSync">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.</span>trackRequestSync
            <span class="apidocSignatureSpan">(client, request, response, ellapsedMilliseconds, properties, error)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.ServerRequests.prototype">module applicationinsights.ServerRequests.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests.prototype._generateCorrelationContext">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>_generateCorrelationContext
            <span class="apidocSignatureSpan">(requestParser)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests.prototype._initialize">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>_initialize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests.prototype.dispose">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>dispose
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests.prototype.enable">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>enable
            <span class="apidocSignatureSpan">(isEnabled)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests.prototype.isAutoCorrelating">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>isAutoCorrelating
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests.prototype.isInitialized">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>isInitialized
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.ServerRequests.prototype.useAutoCorrelation">
            function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>useAutoCorrelation
            <span class="apidocSignatureSpan">(isEnabled)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.applicationinsights.Util">module applicationinsights.Util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util.Util">
            function <span class="apidocSignatureSpan">applicationinsights.</span>Util
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util.canIncludeCorrelationHeader">
            function <span class="apidocSignatureSpan">applicationinsights.Util.</span>canIncludeCorrelationHeader
            <span class="apidocSignatureSpan">(client, requestUrl)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util.getCookie">
            function <span class="apidocSignatureSpan">applicationinsights.Util.</span>getCookie
            <span class="apidocSignatureSpan">(name, cookie)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util.int32ArrayToBase64">
            function <span class="apidocSignatureSpan">applicationinsights.Util.</span>int32ArrayToBase64
            <span class="apidocSignatureSpan">(array)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util.isArray">
            function <span class="apidocSignatureSpan">applicationinsights.Util.</span>isArray
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util.isDate">
            function <span class="apidocSignatureSpan">applicationinsights.Util.</span>isDate
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util.isError">
            function <span class="apidocSignatureSpan">applicationinsights.Util.</span>isError
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util.msToTimeSpan">
            function <span class="apidocSignatureSpan">applicationinsights.Util.</span>msToTimeSpan
            <span class="apidocSignatureSpan">(totalms)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util.newGuid">
            function <span class="apidocSignatureSpan">applicationinsights.Util.</span>newGuid
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util.random32">
            function <span class="apidocSignatureSpan">applicationinsights.Util.</span>random32
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util.trim">
            function <span class="apidocSignatureSpan">applicationinsights.Util.</span>trim
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.applicationinsights.Util.validateStringMap">
            function <span class="apidocSignatureSpan">applicationinsights.Util.</span>validateStringMap
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">applicationinsights.Util.</span>MAX_PROPERTY_LENGTH</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">applicationinsights.Util.</span>document</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights" id="apidoc.module.applicationinsights">module applicationinsights</a></h1>


















    <h2>
        <a href="#apidoc.element.applicationinsights.applicationinsights" id="apidoc.element.applicationinsights.applicationinsights">
        function <span class="apidocSignatureSpan"></span>applicationinsights
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ApplicationInsights() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Channel" id="apidoc.element.applicationinsights.Channel">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Channel
        <span class="apidocSignatureSpan">(isDisabled, getBatchSize, getBatchIntervalMs, sender)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {
    this._buffer = [];
    this._lastSend = 0;
    this._isDisabled = isDisabled;
    this._getBatchSize = getBatchSize;
    this._getBatchIntervalMs = getBatchIntervalMs;
    this._sender = sender;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client" id="apidoc.element.applicationinsights.Client">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Client
        <span class="apidocSignatureSpan">(iKey)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Client(iKey) {
    this._telemetryProcessors = [];
    var config = new Config(iKey);
    this.config = config;
    this.context = new Context();
    this.commonProperties = {};
    var sender = new Sender(function () { return config.endpointUrl; });
    this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function
 () { return config.maxBatchIntervalMs; }, sender);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequestParser" id="apidoc.element.applicationinsights.ClientRequestParser">
        function <span class="apidocSignatureSpan">applicationinsights.</span>ClientRequestParser
        <span class="apidocSignatureSpan">(requestOptions, request)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ClientRequestParser(requestOptions, request) {
    _super.call(this);
    if (request &#x26;&#x26; request.method &#x26;&#x26; requestOptions) {
        // The ClientRequest.method property isn&#x27;t documented, but is always there.
        this.method = request.method;
        this.url = ClientRequestParser._getUrlFromRequestOptions(requestOptions, request);
        this.startTime = +new Date();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequests" id="apidoc.element.applicationinsights.ClientRequests">
        function <span class="apidocSignatureSpan">applicationinsights.</span>ClientRequests
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AutoCollectClientRequests(client) {
    if (!!AutoCollectClientRequests.INSTANCE) {
        throw new Error(&#x22;Client request tracking should be configured from the applicationInsights object&#x22;);
    }
    AutoCollectClientRequests.INSTANCE = this;
    this._client = client;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Config" id="apidoc.element.applicationinsights.Config">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Config
        <span class="apidocSignatureSpan">(instrumentationKey)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Config(instrumentationKey) {
    this.instrumentationKey = instrumentationKey || Config._getInstrumentationKey();
    this.instrumentationKeyHash = Config._getStringHashBase64(this.instrumentationKey);
    this.endpointUrl = &#x22;https://dc.services.visualstudio.com/v2/track&#x22;;
    this.sessionRenewalMs = 30 * 60 * 1000;
    this.sessionExpirationMs = 24 * 60 * 60 * 1000;
    this.maxBatchSize = 250;
    this.maxBatchIntervalMs = 15000;
    this.disableAppInsights = false;
    this.correlationHeaderExcludedDomains = [
        &#x22;*.blob.core.windows.net&#x22;,
        &#x22;*.blob.core.chinacloudapi.cn&#x22;,
        &#x22;*.blob.core.cloudapi.de&#x22;,
        &#x22;*.blob.core.usgovcloudapi.net&#x22;];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Console" id="apidoc.element.applicationinsights.Console">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Console
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AutoCollectConsole(client) {
    if (!!AutoCollectConsole.INSTANCE) {
        throw new Error(&#x22;Console logging adapter tracking should be configured from the applicationInsights object&#x22;);
    }
    this._client = client;
    AutoCollectConsole.INSTANCE = this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Context" id="apidoc.element.applicationinsights.Context">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Context
        <span class="apidocSignatureSpan">(packageJsonPath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Context(packageJsonPath) {
    this.keys = new ContractsModule.Contracts.ContextTagKeys();
    this.tags = {};
    this._loadApplicationContext();
    this._loadDeviceContext();
    this._loadInternalContext();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Exceptions" id="apidoc.element.applicationinsights.Exceptions">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Exceptions
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AutoCollectExceptions(client) {
    if (!!AutoCollectExceptions.INSTANCE) {
        throw new Error(&#x22;Exception tracking should be configured from the applicationInsights object&#x22;);
    }
    AutoCollectExceptions.INSTANCE = this;
    this._client = client;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Logging" id="apidoc.element.applicationinsights.Logging">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Logging
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Logging() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Performance" id="apidoc.element.applicationinsights.Performance">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Performance
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AutoCollectPerformance(client) {
    if (!!AutoCollectPerformance.INSTANCE) {
        throw new Error(&#x22;Performance tracking should be configured from the applicationInsights object&#x22;);
    }
    AutoCollectPerformance.INSTANCE = this;
    this._isInitialized = false;
    this._client = client;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.RequestParser" id="apidoc.element.applicationinsights.RequestParser">
        function <span class="apidocSignatureSpan">applicationinsights.</span>RequestParser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RequestParser() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Sender" id="apidoc.element.applicationinsights.Sender">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Sender
        <span class="apidocSignatureSpan">(getUrl, onSuccess, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Sender(getUrl, onSuccess, onError) {
    this._getUrl = getUrl;
    this._onSuccess = onSuccess;
    this._onError = onError;
    this._enableOfflineMode = false;
    this._resendInterval = Sender.WAIT_BETWEEN_RESEND;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser" id="apidoc.element.applicationinsights.ServerRequestParser">
        function <span class="apidocSignatureSpan">applicationinsights.</span>ServerRequestParser
        <span class="apidocSignatureSpan">(request, requestId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ServerRequestParser(request, requestId) {
    _super.call(this);
    if (request) {
        this.requestId = requestId || Util.newGuid();
        this.method = request.method;
        this.url = this._getAbsoluteUrl(request);
        this.startTime = +new Date();
        this.rawHeaders = request.headers || request.rawHeaders;
        this.socketRemoteAddress = request.socket &#x26;&#x26; request.socket.remoteAddress;
        this.userAgent = request.headers &#x26;&#x26; request.headers[&#x22;user-agent&#x22;];
        this.sourceIKeyHash =
            request.headers &#x26;&#x26; request.headers[RequestResponseHeaders.sourceInstrumentationKeyHeader];
        this.parentId =
            request.headers &#x26;&#x26; request.headers[RequestResponseHeaders.parentIdHeader];
        this.operationId =
            request.headers &#x26;&#x26; request.headers[RequestResponseHeaders.rootIdHeader];
        if (request.connection) {
            this.connectionRemoteAddress = request.connection.remoteAddress;
            this.legacySocketRemoteAddress = request.connection[&#x22;socket&#x22;] &#x26;&#x26; request.connection[&#x22;socket&#x22;].remoteAddress;
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests" id="apidoc.element.applicationinsights.ServerRequests">
        function <span class="apidocSignatureSpan">applicationinsights.</span>ServerRequests
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AutoCollectServerRequests(client) {
    if (!!AutoCollectServerRequests.INSTANCE) {
        throw new Error(&#x22;Server request tracking should be configured from the applicationInsights object&#x22;);
    }
    AutoCollectServerRequests.INSTANCE = this;
    this._client = client;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Util" id="apidoc.element.applicationinsights.Util">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Util
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Util() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.disableConsoleLogging" id="apidoc.element.applicationinsights.disableConsoleLogging">
        function <span class="apidocSignatureSpan">applicationinsights.</span>disableConsoleLogging
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">disableConsoleLogging = function () {
    Logging.enableDebug = false;
    Logging.disableWarnings = true;
    return ApplicationInsights;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.dispose" id="apidoc.element.applicationinsights.dispose">
        function <span class="apidocSignatureSpan">applicationinsights.</span>dispose
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dispose = function () {
    ApplicationInsights.client = null;
    ApplicationInsights._isStarted = false;
    if (ApplicationInsights._console) {
        ApplicationInsights._console.dispose();
    }
    if (ApplicationInsights._exceptions) {
        ApplicationInsights._exceptions.dispose();
    }
    if (ApplicationInsights._performance) {
        ApplicationInsights._performance.dispose();
    }
    if (ApplicationInsights._serverRequests) {
        ApplicationInsights._serverRequests.dispose();
    }
    if (ApplicationInsights._clientRequests) {
        ApplicationInsights._clientRequests.dispose();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.enableVerboseLogging" id="apidoc.element.applicationinsights.enableVerboseLogging">
        function <span class="apidocSignatureSpan">applicationinsights.</span>enableVerboseLogging
        <span class="apidocSignatureSpan">(enableWarningLogging)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">enableVerboseLogging = function (enableWarningLogging) {
    if (enableWarningLogging === void 0) { enableWarningLogging = true; }
    Logging.enableDebug = true;
    Logging.disableWarnings = !enableWarningLogging;
    return ApplicationInsights;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.getClient" id="apidoc.element.applicationinsights.getClient">
        function <span class="apidocSignatureSpan">applicationinsights.</span>getClient
        <span class="apidocSignatureSpan">(instrumentationKey)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getClient = function (instrumentationKey) {
    return new Client(instrumentationKey);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.getCorrelationContext" id="apidoc.element.applicationinsights.getCorrelationContext">
        function <span class="apidocSignatureSpan">applicationinsights.</span>getCorrelationContext
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getCorrelationContext = function () {
    if (this._isCorrelating) {
        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();
    }
    return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.setAutoCollectConsole" id="apidoc.element.applicationinsights.setAutoCollectConsole">
        function <span class="apidocSignatureSpan">applicationinsights.</span>setAutoCollectConsole
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setAutoCollectConsole = function (value) {
    ApplicationInsights._isConsole = value;
    if (ApplicationInsights._isStarted) {
        ApplicationInsights._console.enable(value);
    }
    return ApplicationInsights;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.setAutoCollectDependencies" id="apidoc.element.applicationinsights.setAutoCollectDependencies">
        function <span class="apidocSignatureSpan">applicationinsights.</span>setAutoCollectDependencies
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setAutoCollectDependencies = function (value) {
    ApplicationInsights._isDependencies = value;
    if (ApplicationInsights._isStarted) {
        ApplicationInsights._clientRequests.enable(value);
    }
    return ApplicationInsights;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.setAutoCollectExceptions" id="apidoc.element.applicationinsights.setAutoCollectExceptions">
        function <span class="apidocSignatureSpan">applicationinsights.</span>setAutoCollectExceptions
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setAutoCollectExceptions = function (value) {
    ApplicationInsights._isExceptions = value;
    if (ApplicationInsights._isStarted) {
        ApplicationInsights._exceptions.enable(value);
    }
    return ApplicationInsights;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.setAutoCollectPerformance" id="apidoc.element.applicationinsights.setAutoCollectPerformance">
        function <span class="apidocSignatureSpan">applicationinsights.</span>setAutoCollectPerformance
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setAutoCollectPerformance = function (value) {
    ApplicationInsights._isPerformance = value;
    if (ApplicationInsights._isStarted) {
        ApplicationInsights._performance.enable(value);
    }
    return ApplicationInsights;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.setAutoCollectRequests" id="apidoc.element.applicationinsights.setAutoCollectRequests">
        function <span class="apidocSignatureSpan">applicationinsights.</span>setAutoCollectRequests
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setAutoCollectRequests = function (value) {
    ApplicationInsights._isRequests = value;
    if (ApplicationInsights._isStarted) {
        ApplicationInsights._serverRequests.enable(value);
    }
    return ApplicationInsights;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.setAutoDependencyCorrelation" id="apidoc.element.applicationinsights.setAutoDependencyCorrelation">
        function <span class="apidocSignatureSpan">applicationinsights.</span>setAutoDependencyCorrelation
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setAutoDependencyCorrelation = function (value) {
    ApplicationInsights._isCorrelating = value;
    if (ApplicationInsights._isStarted) {
        ApplicationInsights._serverRequests.useAutoCorrelation(value);
    }
    return ApplicationInsights;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.setOfflineMode" id="apidoc.element.applicationinsights.setOfflineMode">
        function <span class="apidocSignatureSpan">applicationinsights.</span>setOfflineMode
        <span class="apidocSignatureSpan">(value, resendInterval)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setOfflineMode = function (value, resendInterval) {
    ApplicationInsights._isOfflineMode = value;
    if (ApplicationInsights.client &#x26;&#x26; ApplicationInsights.client.channel) {
        ApplicationInsights.client.channel.setOfflineMode(value, resendInterval);
    }
    return ApplicationInsights;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this._getBatchIntervalMs = getBatchIntervalMs;
    this._sender = sender;
}
/**
 * Enable or disable offline mode
 */
Channel.prototype.setOfflineMode = function (value, resendInterval) {
    this._sender.<span class="apidocCodeKeywordSpan">setOfflineMode</span>(value, resendInterval);
};
/**
 * Add a telemetry item to the send buffer
 */
Channel.prototype.send = function (envelope) {
    var _this = this;
    // if master off switch is set, don&#x27;t send any data
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.setup" id="apidoc.element.applicationinsights.setup">
        function <span class="apidocSignatureSpan">applicationinsights.</span>setup
        <span class="apidocSignatureSpan">(instrumentationKey)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setup = function (instrumentationKey) {
    if (!ApplicationInsights.client) {
        ApplicationInsights.client = ApplicationInsights.getClient(instrumentationKey);
        ApplicationInsights._console = new AutoCollectConsole(ApplicationInsights.client);
        ApplicationInsights._exceptions = new AutoCollectExceptions(ApplicationInsights.client);
        ApplicationInsights._performance = new AutoCollectPerformance(ApplicationInsights.client);
        ApplicationInsights._serverRequests = new AutoCollectServerRequests(ApplicationInsights.client);
        ApplicationInsights._clientRequests = new AutoCollectClientRequests(ApplicationInsights.client);
    }
    else {
        Logging.info(&#x22;The default client is already setup&#x22;);
    }
    if (ApplicationInsights.client &#x26;&#x26; ApplicationInsights.client.channel) {
        ApplicationInsights.client.channel.setOfflineMode(ApplicationInsights._isOfflineMode);
    }
    return ApplicationInsights;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.start" id="apidoc.element.applicationinsights.start">
        function <span class="apidocSignatureSpan">applicationinsights.</span>start
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function () {
    if (!!this.client) {
        ApplicationInsights._isStarted = true;
        ApplicationInsights._console.enable(ApplicationInsights._isConsole);
        ApplicationInsights._exceptions.enable(ApplicationInsights._isExceptions);
        ApplicationInsights._performance.enable(ApplicationInsights._isPerformance);
        ApplicationInsights._serverRequests.useAutoCorrelation(ApplicationInsights._isCorrelating);
        ApplicationInsights._serverRequests.enable(ApplicationInsights._isRequests);
        ApplicationInsights._clientRequests.enable(ApplicationInsights._isDependencies);
    }
    else {
        Logging.warn(&#x22;Start cannot be called before setup&#x22;);
    }
    return ApplicationInsights;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.wrapWithCorrelationContext" id="apidoc.element.applicationinsights.wrapWithCorrelationContext">
        function <span class="apidocSignatureSpan">applicationinsights.</span>wrapWithCorrelationContext
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">wrapWithCorrelationContext = function (fn) {
    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Channel" id="apidoc.module.applicationinsights.Channel">module applicationinsights.Channel</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Channel.Channel" id="apidoc.element.applicationinsights.Channel.Channel">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Channel
        <span class="apidocSignatureSpan">(isDisabled, getBatchSize, getBatchIntervalMs, sender)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {
    this._buffer = [];
    this._lastSend = 0;
    this._isDisabled = isDisabled;
    this._getBatchSize = getBatchSize;
    this._getBatchIntervalMs = getBatchIntervalMs;
    this._sender = sender;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Channel.prototype" id="apidoc.module.applicationinsights.Channel.prototype">module applicationinsights.Channel.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Channel.prototype._stringify" id="apidoc.element.applicationinsights.Channel.prototype._stringify">
        function <span class="apidocSignatureSpan">applicationinsights.Channel.prototype.</span>_stringify
        <span class="apidocSignatureSpan">(envelope)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_stringify = function (envelope) {
    try {
        return JSON.stringify(envelope);
    }
    catch (error) {
        Logging.warn(&#x22;Failed to serialize payload&#x22;, error, envelope);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
// validate input
if (!envelope) {
    Logging.warn(&#x22;Cannot send null/undefined telemetry&#x22;);
    return;
}
// check if the incoming payload is too large, truncate if necessary
var payload = this.<span class="apidocCodeKeywordSpan">_stringify</span>(envelope);
if (typeof payload !== &#x22;string&#x22;) {
    return;
}
// enqueue the payload
this._buffer.push(payload);
// flush if we would exceed the max-size limit by adding this item
if (this._buffer.length &#x3e;= this._getBatchSize()) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Channel.prototype.handleCrash" id="apidoc.element.applicationinsights.Channel.prototype.handleCrash">
        function <span class="apidocSignatureSpan">applicationinsights.Channel.prototype.</span>handleCrash
        <span class="apidocSignatureSpan">(envelope)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleCrash = function (envelope) {
    if (envelope) {
        var payload = this._stringify(envelope);
        if (typeof payload === &#x22;string&#x22;) {
            this._buffer.push(payload);
            this.triggerSend(true);
        }
        else {
            Logging.warn(&#x22;Could not send crash&#x22;, envelope);
        }
    }
    else {
        Logging.warn(&#x22;handleCrash was called with empty payload&#x22;, envelope);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        if (isEnabled) {
this._isInitialized = true;
var self = this;
if (!this._exceptionListenerHandle) {
    var handle = function (reThrow, error) {
        var data = AutoCollectExceptions.getExceptionData(error, false);
        var envelope = _this._client.getEnvelope(data);
        _this._client.channel.<span class="apidocCodeKeywordSpan">handleCrash</span>(envelope);
        if (reThrow) {
            throw error;
        }
    };
    this._exceptionListenerHandle = handle.bind(this, true);
    this._rejectionListenerHandle = handle.bind(this, false);
    process.on(&#x22;uncaughtException&#x22;, this._exceptionListenerHandle);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Channel.prototype.send" id="apidoc.element.applicationinsights.Channel.prototype.send">
        function <span class="apidocSignatureSpan">applicationinsights.Channel.prototype.</span>send
        <span class="apidocSignatureSpan">(envelope)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">send = function (envelope) {
    var _this = this;
    // if master off switch is set, don&#x27;t send any data
    if (this._isDisabled()) {
        // Do not send/save data
        return;
    }
    // validate input
    if (!envelope) {
        Logging.warn(&#x22;Cannot send null/undefined telemetry&#x22;);
        return;
    }
    // check if the incoming payload is too large, truncate if necessary
    var payload = this._stringify(envelope);
    if (typeof payload !== &#x22;string&#x22;) {
        return;
    }
    // enqueue the payload
    this._buffer.push(payload);
    // flush if we would exceed the max-size limit by adding this item
    if (this._buffer.length &#x3e;= this._getBatchSize()) {
        this.triggerSend(false);
        return;
    }
    // ensure an invocation timeout is set if anything is in the buffer
    if (!this._timeoutHandle &#x26;&#x26; this._buffer.length &#x3e; 0) {
        this._timeoutHandle = setTimeout(function () {
            _this._timeoutHandle = null;
            _this.triggerSend(false);
        }, this._getBatchIntervalMs());
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (isNodeCrashing) {
        this._sender.saveOnCrash(batch);
        if (typeof callback === &#x22;function&#x22;) {
            callback(&#x22;data saved on crash&#x22;);
        }
    }
    else {
        this._sender.<span class="apidocCodeKeywordSpan">send</span>(new Buffer(batch), callback);
    }
}
// update lastSend time to enable throttling
this._lastSend = +new Date;
// clear buffer
this._buffer.length = 0;
clearTimeout(this._timeoutHandle);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Channel.prototype.setOfflineMode" id="apidoc.element.applicationinsights.Channel.prototype.setOfflineMode">
        function <span class="apidocSignatureSpan">applicationinsights.Channel.prototype.</span>setOfflineMode
        <span class="apidocSignatureSpan">(value, resendInterval)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setOfflineMode = function (value, resendInterval) {
    this._sender.setOfflineMode(value, resendInterval);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this._getBatchIntervalMs = getBatchIntervalMs;
    this._sender = sender;
}
/**
 * Enable or disable offline mode
 */
Channel.prototype.setOfflineMode = function (value, resendInterval) {
    this._sender.<span class="apidocCodeKeywordSpan">setOfflineMode</span>(value, resendInterval);
};
/**
 * Add a telemetry item to the send buffer
 */
Channel.prototype.send = function (envelope) {
    var _this = this;
    // if master off switch is set, don&#x27;t send any data
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Channel.prototype.triggerSend" id="apidoc.element.applicationinsights.Channel.prototype.triggerSend">
        function <span class="apidocSignatureSpan">applicationinsights.Channel.prototype.</span>triggerSend
        <span class="apidocSignatureSpan">(isNodeCrashing, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">triggerSend = function (isNodeCrashing, callback) {
    var bufferIsEmpty = this._buffer.length &#x3c; 1;
    if (!bufferIsEmpty) {
        // compose an array of payloads
        var batch = this._buffer.join(&#x22;\n&#x22;);
        // invoke send
        if (isNodeCrashing) {
            this._sender.saveOnCrash(batch);
            if (typeof callback === &#x22;function&#x22;) {
                callback(&#x22;data saved on crash&#x22;);
            }
        }
        else {
            this._sender.send(new Buffer(batch), callback);
        }
    }
    // update lastSend time to enable throttling
    this._lastSend = +new Date;
    // clear buffer
    this._buffer.length = 0;
    clearTimeout(this._timeoutHandle);
    this._timeoutHandle = null;
    if (bufferIsEmpty &#x26;&#x26; typeof callback === &#x22;function&#x22;) {
        callback(&#x22;no data to send&#x22;);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (typeof payload !== &#x22;string&#x22;) {
    return;
}
// enqueue the payload
this._buffer.push(payload);
// flush if we would exceed the max-size limit by adding this item
if (this._buffer.length &#x3e;= this._getBatchSize()) {
    this.<span class="apidocCodeKeywordSpan">triggerSend</span>(false);
    return;
}
// ensure an invocation timeout is set if anything is in the buffer
if (!this._timeoutHandle &#x26;&#x26; this._buffer.length &#x3e; 0) {
    this._timeoutHandle = setTimeout(function () {
        _this._timeoutHandle = null;
        _this.triggerSend(false);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Client" id="apidoc.module.applicationinsights.Client">module applicationinsights.Client</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Client.Client" id="apidoc.element.applicationinsights.Client.Client">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Client
        <span class="apidocSignatureSpan">(iKey)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Client(iKey) {
    this._telemetryProcessors = [];
    var config = new Config(iKey);
    this.config = config;
    this.context = new Context();
    this.commonProperties = {};
    var sender = new Sender(function () { return config.endpointUrl; });
    this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function
 () { return config.maxBatchIntervalMs; }, sender);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Client.prototype" id="apidoc.module.applicationinsights.Client.prototype">module applicationinsights.Client.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.addTelemetryProcessor" id="apidoc.element.applicationinsights.Client.prototype.addTelemetryProcessor">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>addTelemetryProcessor
        <span class="apidocSignatureSpan">(telemetryProcessor)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addTelemetryProcessor = function (telemetryProcessor) {
    this._telemetryProcessors.push(telemetryProcessor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.clearTelemetryProcessors" id="apidoc.element.applicationinsights.Client.prototype.clearTelemetryProcessors">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>clearTelemetryProcessors
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clearTelemetryProcessors = function () {
    this._telemetryProcessors = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.getEnvelope" id="apidoc.element.applicationinsights.Client.prototype.getEnvelope">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>getEnvelope
        <span class="apidocSignatureSpan">(data, tagOverrides)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getEnvelope = function (data, tagOverrides) {
    if (data &#x26;&#x26; data.baseData) {
        data.baseData.ver = 2;
        // if no properties are specified just add the common ones
        if (!data.baseData.properties) {
            data.baseData.properties = this.commonProperties;
        }
        else {
            // otherwise, check each of the common ones
            for (var name in this.commonProperties) {
                // only override if the property `name` has not been set on this item
                if (!data.baseData.properties[name]) {
                    data.baseData.properties[name] = this.commonProperties[name];
                }
            }
        }
    }
    // sanitize properties
    data.baseData.properties = Util.validateStringMap(data.baseData.properties);
    var iKey = this.config.instrumentationKey;
    var envelope = new ContractsModule.Contracts.Envelope();
    envelope.data = data;
    envelope.iKey = iKey;
    // this is kind of a hack, but the envelope name is always the same as the data name sans the chars &#x22;data&#x22;
    envelope.name =
        &#x22;Microsoft.ApplicationInsights.&#x22; +
            iKey.replace(/-/g, &#x22;&#x22;) +
            &#x22;.&#x22; +
            data.baseType.substr(0, data.baseType.length - 4);
    envelope.tags = this.getTags(tagOverrides);
    envelope.time = (new Date()).toISOString();
    envelope.ver = 1;
    return envelope;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var _this = this;
if (isEnabled) {
    this._isInitialized = true;
    var self = this;
    if (!this._exceptionListenerHandle) {
        var handle = function (reThrow, error) {
            var data = AutoCollectExceptions.getExceptionData(error, false);
            var envelope = _this._client.<span class="apidocCodeKeywordSpan">getEnvelope</span>(data);
            _this._client.channel.handleCrash(envelope);
            if (reThrow) {
                throw error;
            }
        };
        this._exceptionListenerHandle = handle.bind(this, true);
        this._rejectionListenerHandle = handle.bind(this, false);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.getTags" id="apidoc.element.applicationinsights.Client.prototype.getTags">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>getTags
        <span class="apidocSignatureSpan">(tagOverrides)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getTags = function (tagOverrides) {
    var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();
    // Make a copy of context tags so we don&#x27;t alter the actual object
    // Also perform tag overriding
    var newTags = {};
    for (var key in this.context.tags) {
        newTags[key] = this.context.tags[key];
    }
    for (var key in tagOverrides) {
        newTags[key] = tagOverrides[key];
    }
    if (!correlationContext) {
        return newTags;
    }
    // Fill in internally-populated values if not already set
    if (correlationContext) {
        newTags[this.context.keys.operationId] = newTags[this.context.keys.operationId] || correlationContext.operation.id;
        newTags[this.context.keys.operationName] = newTags[this.context.keys.operationName] || correlationContext.operation.name
;
        newTags[this.context.keys.operationParentId] = newTags[this.context.keys.operationParentId] || correlationContext.operation
.parentId;
    }
    return newTags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    envelope.iKey = iKey;
    // this is kind of a hack, but the envelope name is always the same as the data name sans the chars &#x22;data&#x22;
    envelope.name =
        &#x22;Microsoft.ApplicationInsights.&#x22; +
            iKey.replace(/-/g, &#x22;&#x22;) +
            &#x22;.&#x22; +
            data.baseType.substr(0, data.baseType.length - 4);
    envelope.tags = this.<span class="apidocCodeKeywordSpan">getTags</span>(tagOverrides);
    envelope.time = (new Date()).toISOString();
    envelope.ver = 1;
    return envelope;
};
/**
 * Generic track method for all telemetry types
 * @param data the telemetry to send
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.runTelemetryProcessors" id="apidoc.element.applicationinsights.Client.prototype.runTelemetryProcessors">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>runTelemetryProcessors
        <span class="apidocSignatureSpan">(envelope, contextObjects)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">runTelemetryProcessors = function (envelope, contextObjects) {
    var accepted = true;
    var telemetryProcessorsCount = this._telemetryProcessors.length;
    if (telemetryProcessorsCount === 0) {
        return accepted;
    }
    contextObjects = contextObjects || {};
    contextObjects[&#x27;correlationContext&#x27;] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();
    for (var i = 0; i &#x3c; telemetryProcessorsCount; ++i) {
        try {
            var processor = this._telemetryProcessors[i];
            if (processor) {
                if (processor.apply(null, [envelope, contextObjects]) === false) {
                    accepted = false;
                    break;
                }
            }
        }
        catch (error) {
            accepted = false;
            Logging.warn(&#x22;One of telemetry processors failed, telemetry item will not be sent.&#x22;, error, envelope);
        }
    }
    return accepted;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Generic track method for all telemetry types
 * @param data the telemetry to send
 * @param tagOverrides the context tags to use for this telemetry which overwrite default context values
 */
Client.prototype.track = function (data, tagOverrides, contextObjects) {
    var envelope = this.getEnvelope(data, tagOverrides);
    var accepted = this.<span class="apidocCodeKeywordSpan">runTelemetryProcessors</span>(envelope, contextObjects);
    if (accepted) {
        this.channel.send(envelope);
    }
};
/**
 * Adds telemetry processor to the collection. Telemetry processors will be called one by one
 * before telemetry item is pushed for sending and in the order they were added.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.sendPendingData" id="apidoc.element.applicationinsights.Client.prototype.sendPendingData">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>sendPendingData
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendPendingData = function (callback) {
    this.channel.triggerSend(false, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.track" id="apidoc.element.applicationinsights.Client.prototype.track">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>track
        <span class="apidocSignatureSpan">(data, tagOverrides, contextObjects)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">track = function (data, tagOverrides, contextObjects) {
    var envelope = this.getEnvelope(data, tagOverrides);
    var accepted = this.runTelemetryProcessors(envelope, contextObjects);
    if (accepted) {
        this.channel.send(envelope);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    request[&#x27;setHeader&#x27;](RequestResponseHeaders.sourceInstrumentationKeyHeader, client.config.instrumentationKeyHash);
}
// Collect dependency telemetry about the request when it finishes.
if (request.on) {
    request.on(&#x27;response&#x27;, function (response) {
        requestParser.onResponse(response, properties);
        var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;http.ClientResponse
&#x22;: response };
        client.<span class="apidocCodeKeywordSpan">track</span>(requestParser.getDependencyData(), null, context);
    });
    request.on(&#x27;error&#x27;, function (e) {
        requestParser.onError(e, properties);
        var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;Error&#x22
;: e };
        client.track(requestParser.getDependencyData(), null, context);
    });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.trackDependency" id="apidoc.element.applicationinsights.Client.prototype.trackDependency">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackDependency
        <span class="apidocSignatureSpan">(name, commandName, elapsedTimeMs, success, dependencyTypeName, properties, async, target)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trackDependency = function (name, commandName, elapsedTimeMs, success, dependencyTypeName, properties, async, target) {
    if (properties === void 0) { properties = {}; }
    if (async === void 0) { async = false; }
    if (target === void 0) { target = null; }
    if (!target &#x26;&#x26; commandName) {
        target = url.parse(commandName).host;
    }
    var remoteDependency = new ContractsModule.Contracts.RemoteDependencyData();
    remoteDependency.name = name;
    remoteDependency.data = commandName;
    remoteDependency.target = target;
    remoteDependency.duration = Util.msToTimeSpan(elapsedTimeMs);
    remoteDependency.success = success;
    remoteDependency.type = dependencyTypeName;
    remoteDependency.properties = properties;
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;RemoteDependencyData&#x22;;
    data.baseData = remoteDependency;
    this.track(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.trackDependencyRequest" id="apidoc.element.applicationinsights.Client.prototype.trackDependencyRequest">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackDependencyRequest
        <span class="apidocSignatureSpan">(requestOptions, request, properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trackDependencyRequest = function (requestOptions, request, properties) {
    ClientRequestTracking.trackRequest(this, requestOptions, request, properties);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.trackEvent" id="apidoc.element.applicationinsights.Client.prototype.trackEvent">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackEvent
        <span class="apidocSignatureSpan">(name, properties, measurements)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trackEvent = function (name, properties, measurements) {
    var event = new ContractsModule.Contracts.EventData();
    event.name = name;
    event.properties = properties;
    event.measurements = measurements;
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;EventData&#x22;;
    data.baseData = event;
    this.track(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.trackException" id="apidoc.element.applicationinsights.Client.prototype.trackException">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackException
        <span class="apidocSignatureSpan">(exception, properties, measurements)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trackException = function (exception, properties, measurements) {
    if (!Util.isError(exception)) {
        exception = new Error(exception);
    }
    var data = ExceptionTracking.getExceptionData(exception, true, properties, measurements);
    this.track(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.trackMetric" id="apidoc.element.applicationinsights.Client.prototype.trackMetric">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackMetric
        <span class="apidocSignatureSpan">(name, value, count, min, max, stdDev, properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trackMetric = function (name, value, count, min, max, stdDev, properties) {
    var metrics = new ContractsModule.Contracts.MetricData(); // todo: enable client-batching of these
    metrics.metrics = [];
    var metric = new ContractsModule.Contracts.DataPoint();
    metric.count = !isNaN(count) ? count : 1;
    metric.kind = ContractsModule.Contracts.DataPointType.Aggregation;
    metric.max = !isNaN(max) ? max : value;
    metric.min = !isNaN(min) ? min : value;
    metric.name = name;
    metric.stdDev = !isNaN(stdDev) ? stdDev : 0;
    metric.value = value;
    metrics.metrics.push(metric);
    metrics.properties = properties;
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;MetricData&#x22;;
    data.baseData = metrics;
    this.track(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // idle cpu time (or) % CPU time spent idle
    var idle = (times.idle - lastTimes.idle) || 0;
    totalIdle += idle;
    // irq (or) % CPU time spent servicing/handling hardware interrupts
    var irq = (times.irq - lastTimes.irq) || 0;
    totalIrq += irq;
    var total = (user + sys + nice + idle + irq) || 1; // don&#x22;t let this be 0 since it is a divisor
    this._client.<span class="apidocCodeKeywordSpan">trackMetric</span>(name + &#x22;user&#x22;, user / total);
}
var combinedName = &#x22;% total cpu &#x22;;
var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;
this._client.trackMetric(combinedName + &#x22;user&#x22;, totalUser / combinedTotal);
this._client.trackMetric(combinedName + &#x22;sys&#x22;, totalSys / combinedTotal);
this._client.trackMetric(combinedName + &#x22;nice&#x22;, totalNice / combinedTotal);
this._client.trackMetric(combinedName + &#x22;idle&#x22;, totalIdle / combinedTotal);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.trackRequest" id="apidoc.element.applicationinsights.Client.prototype.trackRequest">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackRequest
        <span class="apidocSignatureSpan">(request, response, properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trackRequest = function (request, response, properties) {
    ServerRequestTracking.trackRequest(this, request, response, properties);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
http.request = function (options) {
    var requestArgs = [];
    for (var _i = 1; _i &#x3c; arguments.length; _i++) {
        requestArgs[_i - 1] = arguments[_i];
    }
    var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));
    if (request &#x26;&#x26; options &#x26;&#x26; !options[AutoCollectClientRequests.disableCollectionRequestOption]) {
        AutoCollectClientRequests.<span class="apidocCodeKeywordSpan">trackRequest</span>(_this._client, options, request);
    }
    return request;
};
// On node &#x3e;= v0.11.12, https.request just calls http.request (with additional options).
// But on older versions, https.request needs to be patched also.
// The regex matches versions &#x3c; 0.11.12 (avoiding a semver package dependency).
if (/^0\.([0-9]\.)|(10\.)|(11\.([0-9]|10|11)$)/.test(process.versions.node)) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.trackRequestSync" id="apidoc.element.applicationinsights.Client.prototype.trackRequestSync">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackRequestSync
        <span class="apidocSignatureSpan">(request, response, ellapsedMilliseconds, properties, error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trackRequestSync = function (request, response, ellapsedMilliseconds, properties, error) {
    ServerRequestTracking.trackRequestSync(this, request, response, ellapsedMilliseconds, properties, error);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    metrics.properties = properties;
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;MetricData&#x22;;
    data.baseData = metrics;
    this.track(data);
};
Client.prototype.trackRequestSync = function (request, response, ellapsedMilliseconds, properties, error) {
    ServerRequestTracking.<span class="apidocCodeKeywordSpan">trackRequestSync</span>(this, request, response, ellapsedMilliseconds
, properties, error);
};
Client.prototype.trackRequest = function (request, response, properties) {
    ServerRequestTracking.trackRequest(this, request, response, properties);
};
Client.prototype.trackDependencyRequest = function (requestOptions, request, properties) {
    ClientRequestTracking.trackRequest(this, requestOptions, request, properties);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Client.prototype.trackTrace" id="apidoc.element.applicationinsights.Client.prototype.trackTrace">
        function <span class="apidocSignatureSpan">applicationinsights.Client.prototype.</span>trackTrace
        <span class="apidocSignatureSpan">(message, severityLevel, properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trackTrace = function (message, severityLevel, properties) {
    var trace = new ContractsModule.Contracts.MessageData();
    trace.message = message;
    trace.properties = properties;
    if (!isNaN(severityLevel)) {
        trace.severityLevel = severityLevel;
    }
    else {
        trace.severityLevel = ContractsModule.Contracts.SeverityLevel.Information;
    }
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;MessageData&#x22;;
    data.baseData = trace;
    this.track(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.ClientRequestParser" id="apidoc.module.applicationinsights.ClientRequestParser">module applicationinsights.ClientRequestParser</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequestParser.ClientRequestParser" id="apidoc.element.applicationinsights.ClientRequestParser.ClientRequestParser">
        function <span class="apidocSignatureSpan">applicationinsights.</span>ClientRequestParser
        <span class="apidocSignatureSpan">(requestOptions, request)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ClientRequestParser(requestOptions, request) {
    _super.call(this);
    if (request &#x26;&#x26; request.method &#x26;&#x26; requestOptions) {
        // The ClientRequest.method property isn&#x27;t documented, but is always there.
        this.method = request.method;
        this.url = ClientRequestParser._getUrlFromRequestOptions(requestOptions, request);
        this.startTime = +new Date();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequestParser._getUrlFromRequestOptions" id="apidoc.element.applicationinsights.ClientRequestParser._getUrlFromRequestOptions">
        function <span class="apidocSignatureSpan">applicationinsights.ClientRequestParser.</span>_getUrlFromRequestOptions
        <span class="apidocSignatureSpan">(options, request)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getUrlFromRequestOptions = function (options, request) {
    if (typeof options === &#x27;string&#x27;) {
        options = url.parse(options);
    }
    else {
        // Avoid modifying the original options object.
        var originalOptions_1 = options;
        options = {};
        if (originalOptions_1) {
            Object.keys(originalOptions_1).forEach(function (key) {
                options[key] = originalOptions_1[key];
            });
        }
    }
    // Oddly, url.format ignores path and only uses pathname and search,
    // so create them from the path, if path was specified
    if (options.path) {
        var parsedQuery = url.parse(options.path);
        options.pathname = parsedQuery.pathname;
        options.search = parsedQuery.search;
    }
    // Simiarly, url.format ignores hostname and port if host is specified,
    // even if host doesn&#x27;t have the port, but http.request does not work
    // this way. It will use the port if one is not specified in host,
    // effectively treating host as hostname, but will use the port specified
    // in host if it exists.
    if (options.host &#x26;&#x26; options.port) {
        // Force a protocol so it will parse the host as the host, not path.
        // It is discarded and not used, so it doesn&#x27;t matter if it doesn&#x27;t match
        var parsedHost = url.parse(&#x22;http://&#x22; + options.host);
        if (!parsedHost.port &#x26;&#x26; options.port) {
            options.hostname = options.host;
            delete options.host;
        }
    }
    // Mix in default values used by http.request and others
    options.protocol = options.protocol || request.agent.protocol;
    options.hostname = options.hostname || &#x27;localhost&#x27;;
    return url.format(options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var ClientRequestParser = (function (_super) {
__extends(ClientRequestParser, _super);
function ClientRequestParser(requestOptions, request) {
    _super.call(this);
    if (request &#x26;&#x26; request.method &#x26;&#x26; requestOptions) {
        // The ClientRequest.method property isn&#x27;t documented, but is always there.
        this.method = request.method;
        this.url = ClientRequestParser.<span class="apidocCodeKeywordSpan">_getUrlFromRequestOptions</span>(requestOptions, request
);
        this.startTime = +new Date();
    }
}
/**
 * Called when the ClientRequest emits an error event.
 */
ClientRequestParser.prototype.onError = function (error, properties) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.ClientRequestParser.prototype" id="apidoc.module.applicationinsights.ClientRequestParser.prototype">module applicationinsights.ClientRequestParser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequestParser.prototype.constructor" id="apidoc.element.applicationinsights.ClientRequestParser.prototype.constructor">
        function <span class="apidocSignatureSpan">applicationinsights.ClientRequestParser.prototype.</span>constructor
        <span class="apidocSignatureSpan">(requestOptions, request)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ClientRequestParser(requestOptions, request) {
    _super.call(this);
    if (request &#x26;&#x26; request.method &#x26;&#x26; requestOptions) {
        // The ClientRequest.method property isn&#x27;t documented, but is always there.
        this.method = request.method;
        this.url = ClientRequestParser._getUrlFromRequestOptions(requestOptions, request);
        this.startTime = +new Date();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequestParser.prototype.getDependencyData" id="apidoc.element.applicationinsights.ClientRequestParser.prototype.getDependencyData">
        function <span class="apidocSignatureSpan">applicationinsights.ClientRequestParser.prototype.</span>getDependencyData
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getDependencyData = function () {
    var urlObject = url.parse(this.url);
    urlObject.search = undefined;
    urlObject.hash = undefined;
    var dependencyName = this.method.toUpperCase() + &#x22; &#x22; + urlObject.pathname;
    var remoteDependency = new ContractsModule.Contracts.RemoteDependencyData();
    remoteDependency.type = ContractsModule.Contracts.RemoteDependencyDataConstants.TYPE_HTTP;
    if (this.targetIKeyHash) {
        remoteDependency.type = &#x22;ApplicationInsights&#x22;;
        remoteDependency.target = urlObject.hostname + &#x22; | &#x22; + this.targetIKeyHash;
    }
    else {
        remoteDependency.type = ContractsModule.Contracts.RemoteDependencyDataConstants.TYPE_HTTP;
        remoteDependency.target = urlObject.hostname;
    }
    remoteDependency.name = dependencyName;
    remoteDependency.data = this.url;
    remoteDependency.duration = Util.msToTimeSpan(this.duration);
    remoteDependency.success = this._isSuccess();
    remoteDependency.resultCode = this.statusCode ? this.statusCode.toString() : null;
    remoteDependency.properties = this.properties || {};
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;Microsoft.ApplicationInsights.RemoteDependencyData&#x22;;
    data.baseData = remoteDependency;
    return data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    request[&#x27;setHeader&#x27;](RequestResponseHeaders.sourceInstrumentationKeyHeader, client.config.instrumentationKeyHash);
}
// Collect dependency telemetry about the request when it finishes.
if (request.on) {
    request.on(&#x27;response&#x27;, function (response) {
        requestParser.onResponse(response, properties);
        var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;http.ClientResponse
&#x22;: response };
        client.track(requestParser.<span class="apidocCodeKeywordSpan">getDependencyData</span>(), null, context);
    });
    request.on(&#x27;error&#x27;, function (e) {
        requestParser.onError(e, properties);
        var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;Error&#x22
;: e };
        client.track(requestParser.getDependencyData(), null, context);
    });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequestParser.prototype.onError" id="apidoc.element.applicationinsights.ClientRequestParser.prototype.onError">
        function <span class="apidocSignatureSpan">applicationinsights.ClientRequestParser.prototype.</span>onError
        <span class="apidocSignatureSpan">(error, properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onError = function (error, properties) {
    this._setStatus(undefined, error, properties);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (request.on) {
        request.on(&#x27;response&#x27;, function (response) {
            requestParser.onResponse(response, properties);
            var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;http
.ClientResponse&#x22;: response };
            client.track(requestParser.getDependencyData(), null, context);
        });
        request.on(&#x27;error&#x27;, function (e) {
            requestParser.<span class="apidocCodeKeywordSpan">onError</span>(e, properties);
            var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;Error
&#x22;: e };
            client.track(requestParser.getDependencyData(), null, context);
        });
    }
};
AutoCollectClientRequests.prototype.dispose = function () {
    AutoCollectClientRequests.INSTANCE = null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequestParser.prototype.onResponse" id="apidoc.element.applicationinsights.ClientRequestParser.prototype.onResponse">
        function <span class="apidocSignatureSpan">applicationinsights.ClientRequestParser.prototype.</span>onResponse
        <span class="apidocSignatureSpan">(response, properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onResponse = function (response, properties) {
    this._setStatus(response.statusCode, undefined, properties);
    this.targetIKeyHash =
        response.headers &#x26;&#x26; response.headers[RequestResponseHeaders.targetInstrumentationKeyHeader];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    request[&#x27;getHeader&#x27;] &#x26;&#x26; request[&#x27;setHeader&#x27;] &#x26;&#x26;
    !request[&#x27;getHeader&#x27;](RequestResponseHeaders.sourceInstrumentationKeyHeader)) {
    request[&#x27;setHeader&#x27;](RequestResponseHeaders.sourceInstrumentationKeyHeader, client.config.instrumentationKeyHash);
}
// Collect dependency telemetry about the request when it finishes.
if (request.on) {
    request.on(&#x27;response&#x27;, function (response) {
        requestParser.<span class="apidocCodeKeywordSpan">onResponse</span>(response, properties);
        var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;http.ClientResponse
&#x22;: response };
        client.track(requestParser.getDependencyData(), null, context);
    });
    request.on(&#x27;error&#x27;, function (e) {
        requestParser.onError(e, properties);
        var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;Error&#x22
;: e };
        client.track(requestParser.getDependencyData(), null, context);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.ClientRequests" id="apidoc.module.applicationinsights.ClientRequests">module applicationinsights.ClientRequests</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequests.ClientRequests" id="apidoc.element.applicationinsights.ClientRequests.ClientRequests">
        function <span class="apidocSignatureSpan">applicationinsights.</span>ClientRequests
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AutoCollectClientRequests(client) {
    if (!!AutoCollectClientRequests.INSTANCE) {
        throw new Error(&#x22;Client request tracking should be configured from the applicationInsights object&#x22;);
    }
    AutoCollectClientRequests.INSTANCE = this;
    this._client = client;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequests.trackRequest" id="apidoc.element.applicationinsights.ClientRequests.trackRequest">
        function <span class="apidocSignatureSpan">applicationinsights.ClientRequests.</span>trackRequest
        <span class="apidocSignatureSpan">(client, requestOptions, request, properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trackRequest = function (client, requestOptions, request, properties) {
    if (!requestOptions || !request || !client) {
        Logging.info(&#x22;AutoCollectClientRequests.trackRequest was called with invalid parameters: &#x22;, !requestOptions, !request, !
client);
        return;
    }
    var requestParser = new ClientRequestParser(requestOptions, request);
    // Add the source ikey hash to the request headers, if a value was not already provided.
    // The getHeader/setHeader methods aren&#x27;t available on very old Node versions, and
    // are not included in the v0.10 type declarations currently used. So check if the
    // methods exist before invoking them.
    if (client.config &#x26;&#x26; client.config.instrumentationKeyHash &#x26;&#x26;
        Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) &#x26;&#x26;
        request[&#x27;getHeader&#x27;] &#x26;&#x26; request[&#x27;setHeader&#x27;] &#x26;&#x26;
        !request[&#x27;getHeader&#x27;](RequestResponseHeaders.sourceInstrumentationKeyHeader)) {
        request[&#x27;setHeader&#x27;](RequestResponseHeaders.sourceInstrumentationKeyHeader, client.config.instrumentationKeyHash);
    }
    // Collect dependency telemetry about the request when it finishes.
    if (request.on) {
        request.on(&#x27;response&#x27;, function (response) {
            requestParser.onResponse(response, properties);
            var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;http.ClientResponse&#x22;: response
 };
            client.track(requestParser.getDependencyData(), null, context);
        });
        request.on(&#x27;error&#x27;, function (e) {
            requestParser.onError(e, properties);
            var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;Error&#x22;: e };
            client.track(requestParser.getDependencyData(), null, context);
        });
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
http.request = function (options) {
    var requestArgs = [];
    for (var _i = 1; _i &#x3c; arguments.length; _i++) {
        requestArgs[_i - 1] = arguments[_i];
    }
    var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));
    if (request &#x26;&#x26; options &#x26;&#x26; !options[AutoCollectClientRequests.disableCollectionRequestOption]) {
        AutoCollectClientRequests.<span class="apidocCodeKeywordSpan">trackRequest</span>(_this._client, options, request);
    }
    return request;
};
// On node &#x3e;= v0.11.12, https.request just calls http.request (with additional options).
// But on older versions, https.request needs to be patched also.
// The regex matches versions &#x3c; 0.11.12 (avoiding a semver package dependency).
if (/^0\.([0-9]\.)|(10\.)|(11\.([0-9]|10|11)$)/.test(process.versions.node)) {
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.ClientRequests.prototype" id="apidoc.module.applicationinsights.ClientRequests.prototype">module applicationinsights.ClientRequests.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequests.prototype._initialize" id="apidoc.element.applicationinsights.ClientRequests.prototype._initialize">
        function <span class="apidocSignatureSpan">applicationinsights.ClientRequests.prototype.</span>_initialize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_initialize = function () {
    var _this = this;
    this._isInitialized = true;
    var originalRequest = http.request;
    http.request = function (options) {
        var requestArgs = [];
        for (var _i = 1; _i &#x3c; arguments.length; _i++) {
            requestArgs[_i - 1] = arguments[_i];
        }
        var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));
        if (request &#x26;&#x26; options &#x26;&#x26; !options[AutoCollectClientRequests.disableCollectionRequestOption]) {
            AutoCollectClientRequests.trackRequest(_this._client, options, request);
        }
        return request;
    };
    // On node &#x3e;= v0.11.12, https.request just calls http.request (with additional options).
    // But on older versions, https.request needs to be patched also.
    // The regex matches versions &#x3c; 0.11.12 (avoiding a semver package dependency).
    if (/^0\.([0-9]\.)|(10\.)|(11\.([0-9]|10|11)$)/.test(process.versions.node)) {
        var originalHttpsRequest_1 = https.request;
        https.request = function (options) {
            var requestArgs = [];
            for (var _i = 1; _i &#x3c; arguments.length; _i++) {
                requestArgs[_i - 1] = arguments[_i];
            }
            var request = originalHttpsRequest_1.call.apply(originalHttpsRequest_1, [https, options].concat(requestArgs));
            if (request &#x26;&#x26; options &#x26;&#x26; !options[AutoCollectClientRequests.disableCollectionRequestOption]) {
                AutoCollectClientRequests.trackRequest(_this._client, options, request);
            }
            return request;
        };
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    AutoCollectClientRequests.INSTANCE = this;
    this._client = client;
}
AutoCollectClientRequests.prototype.enable = function (isEnabled) {
    this._isEnabled = isEnabled;
    if (this._isEnabled &#x26;&#x26; !this._isInitialized) {
        this.<span class="apidocCodeKeywordSpan">_initialize</span>();
    }
};
AutoCollectClientRequests.prototype.isInitialized = function () {
    return this._isInitialized;
};
AutoCollectClientRequests.prototype._initialize = function () {
    var _this = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequests.prototype.dispose" id="apidoc.element.applicationinsights.ClientRequests.prototype.dispose">
        function <span class="apidocSignatureSpan">applicationinsights.ClientRequests.prototype.</span>dispose
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dispose = function () {
    AutoCollectClientRequests.INSTANCE = null;
    this._isInitialized = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequests.prototype.enable" id="apidoc.element.applicationinsights.ClientRequests.prototype.enable">
        function <span class="apidocSignatureSpan">applicationinsights.ClientRequests.prototype.</span>enable
        <span class="apidocSignatureSpan">(isEnabled)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">enable = function (isEnabled) {
    this._isEnabled = isEnabled;
    if (this._isEnabled &#x26;&#x26; !this._isInitialized) {
        this._initialize();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if ((this._isAutoCorrelating || this._isEnabled) &#x26;&#x26; !this._isInitialized) {
        this.useAutoCorrelation(this._isAutoCorrelating);
        this._initialize();
    }
};
AutoCollectServerRequests.prototype.useAutoCorrelation = function (isEnabled) {
    if (isEnabled &#x26;&#x26; !this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.<span class="apidocCodeKeywordSpan">enable</span>();
    }
    else if (!isEnabled &#x26;&#x26; this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.disable();
    }
    this._isAutoCorrelating = isEnabled;
};
AutoCollectServerRequests.prototype.isInitialized = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ClientRequests.prototype.isInitialized" id="apidoc.element.applicationinsights.ClientRequests.prototype.isInitialized">
        function <span class="apidocSignatureSpan">applicationinsights.ClientRequests.prototype.</span>isInitialized
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isInitialized = function () {
    return this._isInitialized;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Config" id="apidoc.module.applicationinsights.Config">module applicationinsights.Config</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Config.Config" id="apidoc.element.applicationinsights.Config.Config">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Config
        <span class="apidocSignatureSpan">(instrumentationKey)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Config(instrumentationKey) {
    this.instrumentationKey = instrumentationKey || Config._getInstrumentationKey();
    this.instrumentationKeyHash = Config._getStringHashBase64(this.instrumentationKey);
    this.endpointUrl = &#x22;https://dc.services.visualstudio.com/v2/track&#x22;;
    this.sessionRenewalMs = 30 * 60 * 1000;
    this.sessionExpirationMs = 24 * 60 * 60 * 1000;
    this.maxBatchSize = 250;
    this.maxBatchIntervalMs = 15000;
    this.disableAppInsights = false;
    this.correlationHeaderExcludedDomains = [
        &#x22;*.blob.core.windows.net&#x22;,
        &#x22;*.blob.core.chinacloudapi.cn&#x22;,
        &#x22;*.blob.core.cloudapi.de&#x22;,
        &#x22;*.blob.core.usgovcloudapi.net&#x22;];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Config._getInstrumentationKey" id="apidoc.element.applicationinsights.Config._getInstrumentationKey">
        function <span class="apidocSignatureSpan">applicationinsights.Config.</span>_getInstrumentationKey
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getInstrumentationKey = function () {
    // check for both the documented env variable and the azure-prefixed variable
    var iKey = process.env[Config.ENV_iKey]
        || process.env[Config.ENV_azurePrefix + Config.ENV_iKey]
        || process.env[Config.legacy_ENV_iKey]
        || process.env[Config.ENV_azurePrefix + Config.legacy_ENV_iKey];
    if (!iKey || iKey == &#x22;&#x22;) {
        throw new Error(&#x22;Instrumentation key not found, pass the key in the config to this method or set the key in the environment
 variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server&#x22;);
    }
    return iKey;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


///&#x3c;reference path=&#x22;..\typings\globals\node\index.d.ts&#x22; /&#x3e;
&#x22;use strict&#x22;;
var crypto = require(&#x27;crypto&#x27;);
var Config = (function () {
function Config(instrumentationKey) {
    this.instrumentationKey = instrumentationKey || Config.<span class="apidocCodeKeywordSpan">_getInstrumentationKey</span>();
    this.instrumentationKeyHash = Config._getStringHashBase64(this.instrumentationKey);
    this.endpointUrl = &#x22;https://dc.services.visualstudio.com/v2/track&#x22;;
    this.sessionRenewalMs = 30 * 60 * 1000;
    this.sessionExpirationMs = 24 * 60 * 60 * 1000;
    this.maxBatchSize = 250;
    this.maxBatchIntervalMs = 15000;
    this.disableAppInsights = false;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Config._getStringHashBase64" id="apidoc.element.applicationinsights.Config._getStringHashBase64">
        function <span class="apidocSignatureSpan">applicationinsights.Config.</span>_getStringHashBase64
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getStringHashBase64 = function (value) {
    var hash = crypto.createHash(&#x27;sha256&#x27;);
    hash.update(value);
    var result = hash.digest(&#x27;base64&#x27;);
    return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

///&#x3c;reference path=&#x22;..\typings\globals\node\index.d.ts&#x22; /&#x3e;
&#x22;use strict&#x22;;
var crypto = require(&#x27;crypto&#x27;);
var Config = (function () {
function Config(instrumentationKey) {
    this.instrumentationKey = instrumentationKey || Config._getInstrumentationKey();
    this.instrumentationKeyHash = Config.<span class="apidocCodeKeywordSpan">_getStringHashBase64</span>(this.instrumentationKey
);
    this.endpointUrl = &#x22;https://dc.services.visualstudio.com/v2/track&#x22;;
    this.sessionRenewalMs = 30 * 60 * 1000;
    this.sessionExpirationMs = 24 * 60 * 60 * 1000;
    this.maxBatchSize = 250;
    this.maxBatchIntervalMs = 15000;
    this.disableAppInsights = false;
    this.correlationHeaderExcludedDomains = [
...</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Console" id="apidoc.module.applicationinsights.Console">module applicationinsights.Console</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Console.Console" id="apidoc.element.applicationinsights.Console.Console">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Console
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AutoCollectConsole(client) {
    if (!!AutoCollectConsole.INSTANCE) {
        throw new Error(&#x22;Console logging adapter tracking should be configured from the applicationInsights object&#x22;);
    }
    this._client = client;
    AutoCollectConsole.INSTANCE = this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Console.prototype" id="apidoc.module.applicationinsights.Console.prototype">module applicationinsights.Console.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Console.prototype.dispose" id="apidoc.element.applicationinsights.Console.prototype.dispose">
        function <span class="apidocSignatureSpan">applicationinsights.Console.prototype.</span>dispose
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dispose = function () {
    AutoCollectConsole.INSTANCE = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Console.prototype.enable" id="apidoc.element.applicationinsights.Console.prototype.enable">
        function <span class="apidocSignatureSpan">applicationinsights.Console.prototype.</span>enable
        <span class="apidocSignatureSpan">(isEnabled)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">enable = function (isEnabled) {
    // todo: investigate feasibility/utility of this; does it make sense to have a logging adapter in node?
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if ((this._isAutoCorrelating || this._isEnabled) &#x26;&#x26; !this._isInitialized) {
        this.useAutoCorrelation(this._isAutoCorrelating);
        this._initialize();
    }
};
AutoCollectServerRequests.prototype.useAutoCorrelation = function (isEnabled) {
    if (isEnabled &#x26;&#x26; !this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.<span class="apidocCodeKeywordSpan">enable</span>();
    }
    else if (!isEnabled &#x26;&#x26; this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.disable();
    }
    this._isAutoCorrelating = isEnabled;
};
AutoCollectServerRequests.prototype.isInitialized = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Console.prototype.isInitialized" id="apidoc.element.applicationinsights.Console.prototype.isInitialized">
        function <span class="apidocSignatureSpan">applicationinsights.Console.prototype.</span>isInitialized
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isInitialized = function () {
    return this._isInitialized;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Context" id="apidoc.module.applicationinsights.Context">module applicationinsights.Context</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Context.Context" id="apidoc.element.applicationinsights.Context.Context">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Context
        <span class="apidocSignatureSpan">(packageJsonPath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Context(packageJsonPath) {
    this.keys = new ContractsModule.Contracts.ContextTagKeys();
    this.tags = {};
    this._loadApplicationContext();
    this._loadDeviceContext();
    this._loadInternalContext();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Context.prototype" id="apidoc.module.applicationinsights.Context.prototype">module applicationinsights.Context.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Context.prototype._loadApplicationContext" id="apidoc.element.applicationinsights.Context.prototype._loadApplicationContext">
        function <span class="apidocSignatureSpan">applicationinsights.Context.prototype.</span>_loadApplicationContext
        <span class="apidocSignatureSpan">(packageJsonPath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_loadApplicationContext = function (packageJsonPath) {
    var version = &#x22;unknown&#x22;;
    var description = undefined;
    try {
        // note: this should return the host package.json
        var packageJson = require(packageJsonPath || &#x22;../../../package.json&#x22;);
        if (packageJson) {
            if (typeof packageJson.version === &#x22;string&#x22;) {
                version = packageJson.version;
            }
            if (typeof packageJson.description === &#x22;string&#x22;) {
                description = packageJson.description;
            }
        }
    }
    catch (exception) {
        Logging.info(&#x22;unable to read app version: &#x22;, exception);
    }
    this.tags[this.keys.applicationVersion] = version;
    // TODO: consider sending it as a custom property
    //if(description) {
    //    this.tags[this.keys.applicationBuild] = description;
    //}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var os = require(&#x22;os&#x22;);
var ContractsModule = require(&#x22;../Library/Contracts&#x22;);
var Logging = require(&#x22;./Logging&#x22;);
var Context = (function () {
function Context(packageJsonPath) {
    this.keys = new ContractsModule.Contracts.ContextTagKeys();
    this.tags = {};
    this.<span class="apidocCodeKeywordSpan">_loadApplicationContext</span>();
    this._loadDeviceContext();
    this._loadInternalContext();
}
Context.prototype._loadApplicationContext = function (packageJsonPath) {
    var version = &#x22;unknown&#x22;;
    var description = undefined;
    try {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Context.prototype._loadDeviceContext" id="apidoc.element.applicationinsights.Context.prototype._loadDeviceContext">
        function <span class="apidocSignatureSpan">applicationinsights.Context.prototype.</span>_loadDeviceContext
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_loadDeviceContext = function () {
    this.tags[this.keys.deviceId] = &#x22;&#x22;;
    this.tags[this.keys.cloudRoleInstance] = os &#x26;&#x26; os.hostname();
    this.tags[this.keys.deviceOSVersion] = os &#x26;&#x26; os.type() + &#x22; &#x22; + os &#x26;&#x26; os.release();
    // not yet supported tags
    this.tags[&#x22;ai.device.osArchitecture&#x22;] = os &#x26;&#x26; os.arch();
    this.tags[&#x22;ai.device.osPlatform&#x22;] = os &#x26;&#x26; os.platform();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var ContractsModule = require(&#x22;../Library/Contracts&#x22;);
var Logging = require(&#x22;./Logging&#x22;);
var Context = (function () {
function Context(packageJsonPath) {
    this.keys = new ContractsModule.Contracts.ContextTagKeys();
    this.tags = {};
    this._loadApplicationContext();
    this.<span class="apidocCodeKeywordSpan">_loadDeviceContext</span>();
    this._loadInternalContext();
}
Context.prototype._loadApplicationContext = function (packageJsonPath) {
    var version = &#x22;unknown&#x22;;
    var description = undefined;
    try {
        // note: this should return the host package.json
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Context.prototype._loadInternalContext" id="apidoc.element.applicationinsights.Context.prototype._loadInternalContext">
        function <span class="apidocSignatureSpan">applicationinsights.Context.prototype.</span>_loadInternalContext
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_loadInternalContext = function () {
    var version = &#x22;unknown&#x22;;
    try {
        // note: this should return the appInsights package.json
        var packageJson = require(&#x22;../package.json&#x22;);
        if (packageJson &#x26;&#x26; typeof packageJson.version === &#x22;string&#x22;) {
            version = packageJson.version;
        }
    }
    catch (exception) {
        Logging.info(&#x22;unable to read SDK version: &#x22; + exception);
    }
    this.tags[this.keys.internalSdkVersion] = &#x22;node:&#x22; + version || &#x22;unknown&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var Logging = require(&#x22;./Logging&#x22;);
var Context = (function () {
function Context(packageJsonPath) {
    this.keys = new ContractsModule.Contracts.ContextTagKeys();
    this.tags = {};
    this._loadApplicationContext();
    this._loadDeviceContext();
    this.<span class="apidocCodeKeywordSpan">_loadInternalContext</span>();
}
Context.prototype._loadApplicationContext = function (packageJsonPath) {
    var version = &#x22;unknown&#x22;;
    var description = undefined;
    try {
        // note: this should return the host package.json
        var packageJson = require(packageJsonPath || &#x22;../../../package.json&#x22;);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.CorrelationContextManager" id="apidoc.module.applicationinsights.CorrelationContextManager">module applicationinsights.CorrelationContextManager</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.CorrelationContextManager.CorrelationContextManager" id="apidoc.element.applicationinsights.CorrelationContextManager.CorrelationContextManager">
        function <span class="apidocSignatureSpan">applicationinsights.</span>CorrelationContextManager
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CorrelationContextManager() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Exceptions" id="apidoc.module.applicationinsights.Exceptions">module applicationinsights.Exceptions</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Exceptions.Exceptions" id="apidoc.element.applicationinsights.Exceptions.Exceptions">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Exceptions
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AutoCollectExceptions(client) {
    if (!!AutoCollectExceptions.INSTANCE) {
        throw new Error(&#x22;Exception tracking should be configured from the applicationInsights object&#x22;);
    }
    AutoCollectExceptions.INSTANCE = this;
    this._client = client;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Exceptions.getExceptionData" id="apidoc.element.applicationinsights.Exceptions.getExceptionData">
        function <span class="apidocSignatureSpan">applicationinsights.Exceptions.</span>getExceptionData
        <span class="apidocSignatureSpan">(error, isHandled, properties, measurements)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getExceptionData = function (error, isHandled, properties, measurements) {
    var exception = new ContractsModule.Contracts.ExceptionData();
    exception.properties = properties;
    exception.severityLevel = ContractsModule.Contracts.SeverityLevel.Error;
    exception.measurements = measurements;
    exception.exceptions = [];
    var stack = error[&#x22;stack&#x22;];
    var exceptionDetails = new ContractsModule.Contracts.ExceptionDetails();
    exceptionDetails.message = error.message;
    exceptionDetails.typeName = error.name;
    exceptionDetails.parsedStack = this.parseStack(stack);
    exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) &#x26;&#x26; exceptionDetails.parsedStack.length &#x3e; 0;
    exception.exceptions.push(exceptionDetails);
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;Microsoft.ApplicationInsights.ExceptionData&#x22;;
    data.baseData = exception;
    return data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    AutoCollectExceptions.prototype.enable = function (isEnabled) {
var _this = this;
if (isEnabled) {
    this._isInitialized = true;
    var self = this;
    if (!this._exceptionListenerHandle) {
        var handle = function (reThrow, error) {
            var data = AutoCollectExceptions.<span class="apidocCodeKeywordSpan">getExceptionData</span>(error, false);
            var envelope = _this._client.getEnvelope(data);
            _this._client.channel.handleCrash(envelope);
            if (reThrow) {
                throw error;
            }
        };
        this._exceptionListenerHandle = handle.bind(this, true);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Exceptions.parseStack" id="apidoc.element.applicationinsights.Exceptions.parseStack">
        function <span class="apidocSignatureSpan">applicationinsights.Exceptions.</span>parseStack
        <span class="apidocSignatureSpan">(stack)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseStack = function (stack) {
    var parsedStack = undefined;
    if (typeof stack === &#x22;string&#x22;) {
        var frames = stack.split(&#x22;\n&#x22;);
        parsedStack = [];
        var level = 0;
        var totalSizeInBytes = 0;
        for (var i = 0; i &#x3c;= frames.length; i++) {
            var frame = frames[i];
            if (_StackFrame.regex.test(frame)) {
                var parsedFrame = new _StackFrame(frames[i], level++);
                totalSizeInBytes += parsedFrame.sizeInBytes;
                parsedStack.push(parsedFrame);
            }
        }
        // DP Constraint - exception parsed stack must be &#x3c; 32KB
        // remove frames from the middle to meet the threshold
        var exceptionParsedStackThreshold = 32 * 1024;
        if (totalSizeInBytes &#x3e; exceptionParsedStackThreshold) {
            var left = 0;
            var right = parsedStack.length - 1;
            var size = 0;
            var acceptedLeft = left;
            var acceptedRight = right;
            while (left &#x3c; right) {
                // check size
                var lSize = parsedStack[left].sizeInBytes;
                var rSize = parsedStack[right].sizeInBytes;
                size += lSize + rSize;
                if (size &#x3e; exceptionParsedStackThreshold) {
                    // remove extra frames from the middle
                    var howMany = acceptedRight - acceptedLeft + 1;
                    parsedStack.splice(acceptedLeft, howMany);
                    break;
                }
                // update pointers
                acceptedLeft = left;
                acceptedRight = right;
                left++;
                right--;
            }
        }
    }
    return parsedStack;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    exception.severityLevel = ContractsModule.Contracts.SeverityLevel.Error;
    exception.measurements = measurements;
    exception.exceptions = [];
    var stack = error[&#x22;stack&#x22;];
    var exceptionDetails = new ContractsModule.Contracts.ExceptionDetails();
    exceptionDetails.message = error.message;
    exceptionDetails.typeName = error.name;
    exceptionDetails.parsedStack = this.<span class="apidocCodeKeywordSpan">parseStack</span>(stack);
    exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) &#x26;&#x26; exceptionDetails.parsedStack.length &#
x3e; 0;
    exception.exceptions.push(exceptionDetails);
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;Microsoft.ApplicationInsights.ExceptionData&#x22;;
    data.baseData = exception;
    return data;
};
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Exceptions.prototype" id="apidoc.module.applicationinsights.Exceptions.prototype">module applicationinsights.Exceptions.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Exceptions.prototype.dispose" id="apidoc.element.applicationinsights.Exceptions.prototype.dispose">
        function <span class="apidocSignatureSpan">applicationinsights.Exceptions.prototype.</span>dispose
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dispose = function () {
    AutoCollectExceptions.INSTANCE = null;
    this._isInitialized = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Exceptions.prototype.enable" id="apidoc.element.applicationinsights.Exceptions.prototype.enable">
        function <span class="apidocSignatureSpan">applicationinsights.Exceptions.prototype.</span>enable
        <span class="apidocSignatureSpan">(isEnabled)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">enable = function (isEnabled) {
    var _this = this;
    if (isEnabled) {
        this._isInitialized = true;
        var self = this;
        if (!this._exceptionListenerHandle) {
            var handle = function (reThrow, error) {
                var data = AutoCollectExceptions.getExceptionData(error, false);
                var envelope = _this._client.getEnvelope(data);
                _this._client.channel.handleCrash(envelope);
                if (reThrow) {
                    throw error;
                }
            };
            this._exceptionListenerHandle = handle.bind(this, true);
            this._rejectionListenerHandle = handle.bind(this, false);
            process.on(&#x22;uncaughtException&#x22;, this._exceptionListenerHandle);
            process.on(&#x22;unhandledRejection&#x22;, this._rejectionListenerHandle);
        }
    }
    else {
        if (this._exceptionListenerHandle) {
            process.removeListener(&#x22;uncaughtException&#x22;, this._exceptionListenerHandle);
            process.removeListener(&#x22;unhandledRejection&#x22;, this._rejectionListenerHandle);
            this._exceptionListenerHandle = undefined;
            this._rejectionListenerHandle = undefined;
            delete this._exceptionListenerHandle;
            delete this._rejectionListenerHandle;
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if ((this._isAutoCorrelating || this._isEnabled) &#x26;&#x26; !this._isInitialized) {
        this.useAutoCorrelation(this._isAutoCorrelating);
        this._initialize();
    }
};
AutoCollectServerRequests.prototype.useAutoCorrelation = function (isEnabled) {
    if (isEnabled &#x26;&#x26; !this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.<span class="apidocCodeKeywordSpan">enable</span>();
    }
    else if (!isEnabled &#x26;&#x26; this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.disable();
    }
    this._isAutoCorrelating = isEnabled;
};
AutoCollectServerRequests.prototype.isInitialized = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Exceptions.prototype.isInitialized" id="apidoc.element.applicationinsights.Exceptions.prototype.isInitialized">
        function <span class="apidocSignatureSpan">applicationinsights.Exceptions.prototype.</span>isInitialized
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isInitialized = function () {
    return this._isInitialized;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Logging" id="apidoc.module.applicationinsights.Logging">module applicationinsights.Logging</a></h1>






    <h2>
        <a href="#apidoc.element.applicationinsights.Logging.Logging" id="apidoc.element.applicationinsights.Logging.Logging">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Logging
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Logging() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Logging.info" id="apidoc.element.applicationinsights.Logging.info">
        function <span class="apidocSignatureSpan">applicationinsights.Logging.</span>info
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function (message) {
    var optionalParams = [];
    for (var _i = 1; _i &#x3c; arguments.length; _i++) {
        optionalParams[_i - 1] = arguments[_i];
    }
    if (Logging.enableDebug) {
        console.info(Logging.TAG + message, optionalParams);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};
/**
 * Tracks an outgoing request. Because it may set headers this method must be called before
 * writing content to or ending the request.
 */
AutoCollectClientRequests.trackRequest = function (client, requestOptions, request, properties) {
    if (!requestOptions || !request || !client) {
        Logging.<span class="apidocCodeKeywordSpan">info</span>(&#x22;AutoCollectClientRequests.trackRequest was called with invalid
 parameters: &#x22;, !requestOptions, !request, !client);
        return;
    }
    var requestParser = new ClientRequestParser(requestOptions, request);
    // Add the source ikey hash to the request headers, if a value was not already provided.
    // The getHeader/setHeader methods aren&#x27;t available on very old Node versions, and
    // are not included in the v0.10 type declarations currently used. So check if the
    // methods exist before invoking them.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Logging.warn" id="apidoc.element.applicationinsights.Logging.warn">
        function <span class="apidocSignatureSpan">applicationinsights.Logging.</span>warn
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warn = function (message) {
    var optionalParams = [];
    for (var _i = 1; _i &#x3c; arguments.length; _i++) {
        optionalParams[_i - 1] = arguments[_i];
    }
    if (!Logging.disableWarnings) {
        console.warn(Logging.TAG + message, optionalParams);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        });
    };
};
AutoCollectPerformance.countRequest = function (request, response) {
    var _this = this;
    var start = +new Date;
    if (!request || !response) {
        Logging.<span class="apidocCodeKeywordSpan">warn</span>(&#x22;AutoCollectPerformance.countRequest was called with invalid
 parameters: &#x22;, !!request, !!response);
        return;
    }
    // response listeners
    if (typeof response.once === &#x22;function&#x22;) {
        response.once(&#x22;finish&#x22;, function () {
            var end = +new Date;
            _this._lastRequestExecutionTime = end - start;
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Performance" id="apidoc.module.applicationinsights.Performance">module applicationinsights.Performance</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Performance.Performance" id="apidoc.element.applicationinsights.Performance.Performance">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Performance
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AutoCollectPerformance(client) {
    if (!!AutoCollectPerformance.INSTANCE) {
        throw new Error(&#x22;Performance tracking should be configured from the applicationInsights object&#x22;);
    }
    AutoCollectPerformance.INSTANCE = this;
    this._isInitialized = false;
    this._client = client;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Performance.countRequest" id="apidoc.element.applicationinsights.Performance.countRequest">
        function <span class="apidocSignatureSpan">applicationinsights.Performance.</span>countRequest
        <span class="apidocSignatureSpan">(request, response)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">countRequest = function (request, response) {
    var _this = this;
    var start = +new Date;
    if (!request || !response) {
        Logging.warn(&#x22;AutoCollectPerformance.countRequest was called with invalid parameters: &#x22;, !!request, !!response);
        return;
    }
    // response listeners
    if (typeof response.once === &#x22;function&#x22;) {
        response.once(&#x22;finish&#x22;, function () {
            var end = +new Date;
            _this._lastRequestExecutionTime = end - start;
            AutoCollectPerformance._totalRequestCount++;
            if (response.statusCode &#x3e;= 400) {
                AutoCollectPerformance._totalFailedRequestCount++;
            }
        });
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
AutoCollectPerformance.prototype._initialize = function () {
    var _this = this;
    this._isInitialized = true;
    var originalServer = http.createServer;
    http.createServer = function (onRequest) {
        return originalServer(function (request, response) {
            if (_this._isEnabled) {
                AutoCollectPerformance.<span class="apidocCodeKeywordSpan">countRequest</span>(request, response);
            }
            if (typeof onRequest === &#x22;function&#x22;) {
                onRequest(request, response);
            }
        });
    };
};
...</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Performance.prototype" id="apidoc.module.applicationinsights.Performance.prototype">module applicationinsights.Performance.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Performance.prototype._initialize" id="apidoc.element.applicationinsights.Performance.prototype._initialize">
        function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>_initialize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_initialize = function () {
    var _this = this;
    this._isInitialized = true;
    var originalServer = http.createServer;
    http.createServer = function (onRequest) {
        return originalServer(function (request, response) {
            if (_this._isEnabled) {
                AutoCollectPerformance.countRequest(request, response);
            }
            if (typeof onRequest === &#x22;function&#x22;) {
                onRequest(request, response);
            }
        });
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    AutoCollectClientRequests.INSTANCE = this;
    this._client = client;
}
AutoCollectClientRequests.prototype.enable = function (isEnabled) {
    this._isEnabled = isEnabled;
    if (this._isEnabled &#x26;&#x26; !this._isInitialized) {
        this.<span class="apidocCodeKeywordSpan">_initialize</span>();
    }
};
AutoCollectClientRequests.prototype.isInitialized = function () {
    return this._isInitialized;
};
AutoCollectClientRequests.prototype._initialize = function () {
    var _this = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Performance.prototype._trackCpu" id="apidoc.element.applicationinsights.Performance.prototype._trackCpu">
        function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>_trackCpu
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_trackCpu = function () {
    // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary
    // to find the delta since the last measurement
    var cpus = os.cpus();
    if (cpus &#x26;&#x26; cpus.length &#x26;&#x26; this._lastCpus &#x26;&#x26; cpus.length === this._lastCpus.length) {
        var totalUser = 0;
        var totalSys = 0;
        var totalNice = 0;
        var totalIdle = 0;
        var totalIrq = 0;
        for (var i = 0; !!cpus &#x26;&#x26; i &#x3c; cpus.length; i++) {
            var cpu = cpus[i];
            var lastCpu = this._lastCpus[i];
            var name = &#x22;% cpu(&#x22; + i + &#x22;) &#x22;;
            var model = cpu.model;
            var speed = cpu.speed;
            var times = cpu.times;
            var lastTimes = lastCpu.times;
            // user cpu time (or) % CPU time spent in user space
            var user = (times.user - lastTimes.user) || 0;
            totalUser += user;
            // system cpu time (or) % CPU time spent in kernel space
            var sys = (times.sys - lastTimes.sys) || 0;
            totalSys += sys;
            // user nice cpu time (or) % CPU time spent on low priority processes
            var nice = (times.nice - lastTimes.nice) || 0;
            totalNice += nice;
            // idle cpu time (or) % CPU time spent idle
            var idle = (times.idle - lastTimes.idle) || 0;
            totalIdle += idle;
            // irq (or) % CPU time spent servicing/handling hardware interrupts
            var irq = (times.irq - lastTimes.irq) || 0;
            totalIrq += irq;
            var total = (user + sys + nice + idle + irq) || 1; // don&#x22;t let this be 0 since it is a divisor
            this._client.trackMetric(name + &#x22;user&#x22;, user / total);
        }
        var combinedName = &#x22;% total cpu &#x22;;
        var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;
        this._client.trackMetric(combinedName + &#x22;user&#x22;, totalUser / combinedTotal);
        this._client.trackMetric(combinedName + &#x22;sys&#x22;, totalSys / combinedTotal);
        this._client.trackMetric(combinedName + &#x22;nice&#x22;, totalNice / combinedTotal);
        this._client.trackMetric(combinedName + &#x22;idle&#x22;, totalIdle / combinedTotal);
        this._client.trackMetric(combinedName + &#x22;irq&#x22;, totalIrq / combinedTotal);
        // todo: remove this legacy counter once the UI updates (~june 2015)
        this._trackLegacyPerformance(PerfCounterType.ProcessorTime, totalUser / combinedTotal);
        this._trackLegacyPerformance(PerfCounterType.PercentProcessorTime, (combinedTotal - totalIdle) / combinedTotal);
    }
    this._lastCpus = cpus;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            if (response.statusCode &#x3e;= 400) {
                AutoCollectPerformance._totalFailedRequestCount++;
            }
        });
    }
};
AutoCollectPerformance.prototype.trackPerformance = function () {
    this.<span class="apidocCodeKeywordSpan">_trackCpu</span>();
    this._trackMemory();
    this._trackNetwork();
};
// this is necessary to accommodate some point-in-time UI quirks
AutoCollectPerformance.prototype._trackLegacyPerformance = function (counterType, value) {
    var perfmetric = new ContractsModule.Contracts.PerformanceCounterData();
    // semantic descriptions of these can be found here: https://support.microsoft.com/en-us/kb/815159/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Performance.prototype._trackLegacyPerformance" id="apidoc.element.applicationinsights.Performance.prototype._trackLegacyPerformance">
        function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>_trackLegacyPerformance
        <span class="apidocSignatureSpan">(counterType, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_trackLegacyPerformance = function (counterType, value) {
    var perfmetric = new ContractsModule.Contracts.PerformanceCounterData();
    // semantic descriptions of these can be found here: https://support.microsoft.com/en-us/kb/815159/
    switch (counterType) {
        case PerfCounterType.ProcessorTime:
            perfmetric.categoryName = &#x22;Process&#x22;;
            perfmetric.counterName = &#x22;% Processor Time&#x22;;
            break;
        case PerfCounterType.AvailableMemory:
            perfmetric.categoryName = &#x22;Memory&#x22;;
            perfmetric.counterName = &#x22;Available Bytes&#x22;;
            break;
        case PerfCounterType.RequestsPerSec:
            perfmetric.categoryName = &#x22;ASP.NET Applications&#x22;;
            perfmetric.counterName = &#x22;Requests/Sec&#x22;;
            break;
        case PerfCounterType.PrivateBytes:
            perfmetric.categoryName = &#x22;Process&#x22;;
            perfmetric.counterName = &#x22;Private Bytes&#x22;;
            break;
        case PerfCounterType.RequestExecutionTime:
            perfmetric.categoryName = &#x22;ASP.NET Applications&#x22;;
            perfmetric.counterName = &#x22;Request Execution Time&#x22;;
            break;
        case PerfCounterType.PercentProcessorTime:
            perfmetric.categoryName = &#x22;Processor&#x22;;
            perfmetric.counterName = &#x22;% Processor Time&#x22;;
            break;
    }
    perfmetric.count = 1;
    perfmetric.kind = ContractsModule.Contracts.DataPointType.Aggregation;
    perfmetric.max = value;
    perfmetric.min = value;
    perfmetric.stdDev = 0;
    perfmetric.value = value;
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;Microsoft.ApplicationInsights.PerformanceCounterData&#x22;;
    data.baseData = perfmetric;
    this._client.track(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;
        this._client.trackMetric(combinedName + &#x22;user&#x22;, totalUser / combinedTotal);
        this._client.trackMetric(combinedName + &#x22;sys&#x22;, totalSys / combinedTotal);
        this._client.trackMetric(combinedName + &#x22;nice&#x22;, totalNice / combinedTotal);
        this._client.trackMetric(combinedName + &#x22;idle&#x22;, totalIdle / combinedTotal);
        this._client.trackMetric(combinedName + &#x22;irq&#x22;, totalIrq / combinedTotal);
        // todo: remove this legacy counter once the UI updates (~june 2015)
        this.<span class="apidocCodeKeywordSpan">_trackLegacyPerformance</span>(PerfCounterType.ProcessorTime, totalUser / combinedTotal
);
        this._trackLegacyPerformance(PerfCounterType.PercentProcessorTime, (combinedTotal - totalIdle) / combinedTotal);
    }
    this._lastCpus = cpus;
};
AutoCollectPerformance.prototype._trackMemory = function () {
    var totalMem = os.totalmem();
    var freeMem = os.freemem();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Performance.prototype._trackMemory" id="apidoc.element.applicationinsights.Performance.prototype._trackMemory">
        function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>_trackMemory
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_trackMemory = function () {
    var totalMem = os.totalmem();
    var freeMem = os.freemem();
    var usedMem = totalMem - freeMem;
    var percentUsedMem = usedMem / (totalMem || 1);
    var percentAvailableMem = freeMem / (totalMem || 1);
    this._client.trackMetric(&#x22;Memory Used&#x22;, usedMem);
    this._client.trackMetric(&#x22;Memory Free&#x22;, freeMem);
    this._client.trackMetric(&#x22;Memory Total&#x22;, totalMem);
    this._client.trackMetric(&#x22;% Memory Used&#x22;, percentUsedMem);
    this._client.trackMetric(&#x22;% Memory Free&#x22;, percentAvailableMem);
    // todo: remove this legacy counter once the UI updates (~june 2015)
    this._trackLegacyPerformance(PerfCounterType.AvailableMemory, freeMem);
    this._trackLegacyPerformance(PerfCounterType.PrivateBytes, usedMem);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
                AutoCollectPerformance._totalFailedRequestCount++;
            }
        });
    }
};
AutoCollectPerformance.prototype.trackPerformance = function () {
    this._trackCpu();
    this.<span class="apidocCodeKeywordSpan">_trackMemory</span>();
    this._trackNetwork();
};
// this is necessary to accommodate some point-in-time UI quirks
AutoCollectPerformance.prototype._trackLegacyPerformance = function (counterType, value) {
    var perfmetric = new ContractsModule.Contracts.PerformanceCounterData();
    // semantic descriptions of these can be found here: https://support.microsoft.com/en-us/kb/815159/
    switch (counterType) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Performance.prototype._trackNetwork" id="apidoc.element.applicationinsights.Performance.prototype._trackNetwork">
        function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>_trackNetwork
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_trackNetwork = function () {
    // track total request counters
    var lastRequests = this._lastRequests;
    var requests = {
        totalRequestCount: AutoCollectPerformance._totalRequestCount,
        totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,
        time: +new Date
    };
    var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;
    var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;
    var elapsedMs = requests.time - lastRequests.time;
    var elapsedSeconds = elapsedMs / 1000;
    if (elapsedMs &#x3e; 0) {
        var requestsPerSec = intervalRequests / elapsedSeconds;
        var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;
        this._client.trackMetric(&#x22;Total Requests&#x22;, requests.totalRequestCount);
        this._client.trackMetric(&#x22;Total Failed Requests&#x22;, requests.totalFailedRequestCount);
        this._client.trackMetric(&#x22;Requests per Second&#x22;, requestsPerSec);
        this._client.trackMetric(&#x22;Failed Requests per Second&#x22;, failedRequestsPerSec);
        this._client.trackMetric(&#x22;Last Request Execution Time&#x22;, AutoCollectPerformance._lastRequestExecutionTime);
        // todo: remove this legacy counter once the UI updates (~june 2015)
        this._trackLegacyPerformance(PerfCounterType.RequestsPerSec, requestsPerSec);
        this._trackLegacyPerformance(PerfCounterType.RequestExecutionTime, AutoCollectPerformance._lastRequestExecutionTime);
    }
    this._lastRequests = requests;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            }
        });
    }
};
AutoCollectPerformance.prototype.trackPerformance = function () {
    this._trackCpu();
    this._trackMemory();
    this.<span class="apidocCodeKeywordSpan">_trackNetwork</span>();
};
// this is necessary to accommodate some point-in-time UI quirks
AutoCollectPerformance.prototype._trackLegacyPerformance = function (counterType, value) {
    var perfmetric = new ContractsModule.Contracts.PerformanceCounterData();
    // semantic descriptions of these can be found here: https://support.microsoft.com/en-us/kb/815159/
    switch (counterType) {
        case PerfCounterType.ProcessorTime:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Performance.prototype.dispose" id="apidoc.element.applicationinsights.Performance.prototype.dispose">
        function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>dispose
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dispose = function () {
    AutoCollectPerformance.INSTANCE = null;
    this._isInitialized = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Performance.prototype.enable" id="apidoc.element.applicationinsights.Performance.prototype.enable">
        function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>enable
        <span class="apidocSignatureSpan">(isEnabled)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">enable = function (isEnabled) {
    var _this = this;
    this._isEnabled = isEnabled;
    if (this._isEnabled &#x26;&#x26; !this._isInitialized) {
        this._initialize();
    }
    if (isEnabled) {
        if (!this._handle) {
            this._lastCpus = os.cpus();
            this._lastRequests = {
                totalRequestCount: AutoCollectPerformance._totalRequestCount,
                totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,
                time: +new Date
            };
            this._handle = setInterval(function () { return _this.trackPerformance(); }, 10000);
        }
    }
    else {
        if (this._handle) {
            clearInterval(this._handle);
            this._handle = undefined;
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if ((this._isAutoCorrelating || this._isEnabled) &#x26;&#x26; !this._isInitialized) {
        this.useAutoCorrelation(this._isAutoCorrelating);
        this._initialize();
    }
};
AutoCollectServerRequests.prototype.useAutoCorrelation = function (isEnabled) {
    if (isEnabled &#x26;&#x26; !this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.<span class="apidocCodeKeywordSpan">enable</span>();
    }
    else if (!isEnabled &#x26;&#x26; this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.disable();
    }
    this._isAutoCorrelating = isEnabled;
};
AutoCollectServerRequests.prototype.isInitialized = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Performance.prototype.isInitialized" id="apidoc.element.applicationinsights.Performance.prototype.isInitialized">
        function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>isInitialized
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isInitialized = function () {
    return this._isInitialized;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Performance.prototype.trackPerformance" id="apidoc.element.applicationinsights.Performance.prototype.trackPerformance">
        function <span class="apidocSignatureSpan">applicationinsights.Performance.prototype.</span>trackPerformance
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trackPerformance = function () {
    this._trackCpu();
    this._trackMemory();
    this._trackNetwork();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (!this._handle) {
        this._lastCpus = os.cpus();
        this._lastRequests = {
            totalRequestCount: AutoCollectPerformance._totalRequestCount,
            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,
            time: +new Date
        };
        this._handle = setInterval(function () { return _this.<span class="apidocCodeKeywordSpan">trackPerformance</span>(); },
10000);
    }
}
else {
    if (this._handle) {
        clearInterval(this._handle);
        this._handle = undefined;
    }
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.RequestParser" id="apidoc.module.applicationinsights.RequestParser">module applicationinsights.RequestParser</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.RequestParser.RequestParser" id="apidoc.element.applicationinsights.RequestParser.RequestParser">
        function <span class="apidocSignatureSpan">applicationinsights.</span>RequestParser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RequestParser() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.RequestParser.prototype" id="apidoc.module.applicationinsights.RequestParser.prototype">module applicationinsights.RequestParser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.RequestParser.prototype.RequestParser" id="apidoc.element.applicationinsights.RequestParser.prototype.RequestParser">
        function <span class="apidocSignatureSpan">applicationinsights.RequestParser.prototype.</span>RequestParser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">RequestParser = function () {
    this.startTime = +new Date();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.RequestParser.prototype._isSuccess" id="apidoc.element.applicationinsights.RequestParser.prototype._isSuccess">
        function <span class="apidocSignatureSpan">applicationinsights.RequestParser.prototype.</span>_isSuccess
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_isSuccess = function () {
    return (0 &#x3c; this.statusCode) &#x26;&#x26; (this.statusCode &#x3c; 400);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    else {
        remoteDependency.type = ContractsModule.Contracts.RemoteDependencyDataConstants.TYPE_HTTP;
        remoteDependency.target = urlObject.hostname;
    }
    remoteDependency.name = dependencyName;
    remoteDependency.data = this.url;
    remoteDependency.duration = Util.msToTimeSpan(this.duration);
    remoteDependency.success = this.<span class="apidocCodeKeywordSpan">_isSuccess</span>();
    remoteDependency.resultCode = this.statusCode ? this.statusCode.toString() : null;
    remoteDependency.properties = this.properties || {};
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;Microsoft.ApplicationInsights.RemoteDependencyData&#x22;;
    data.baseData = remoteDependency;
    return data;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.RequestParser.prototype._setStatus" id="apidoc.element.applicationinsights.RequestParser.prototype._setStatus">
        function <span class="apidocSignatureSpan">applicationinsights.RequestParser.prototype.</span>_setStatus
        <span class="apidocSignatureSpan">(status, error, properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_setStatus = function (status, error, properties) {
    var endTime = +new Date();
    this.duration = endTime - this.startTime;
    this.statusCode = status;
    if (error) {
        if (!properties) {
            properties = {};
        }
        if (typeof error === &#x22;string&#x22;) {
            properties[&#x22;error&#x22;] = error;
        }
        else if (error instanceof Error) {
            properties[&#x22;error&#x22;] = error.message;
        }
        else if (typeof error === &#x22;object&#x22;) {
            for (var key in error) {
                properties[key] = error[key] &#x26;&#x26; error[key].toString &#x26;&#x26; error[key].toString();
            }
        }
    }
    this.properties = properties;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        this.startTime = +new Date();
    }
}
/**
 * Called when the ClientRequest emits an error event.
 */
ClientRequestParser.prototype.onError = function (error, properties) {
    this.<span class="apidocCodeKeywordSpan">_setStatus</span>(undefined, error, properties);
};
/**
 * Called when the ClientRequest emits a response event.
 */
ClientRequestParser.prototype.onResponse = function (response, properties) {
    this._setStatus(response.statusCode, undefined, properties);
    this.targetIKeyHash =
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.RequestParser.prototype.getUrl" id="apidoc.element.applicationinsights.RequestParser.prototype.getUrl">
        function <span class="apidocSignatureSpan">applicationinsights.RequestParser.prototype.</span>getUrl
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUrl = function () {
    return this.url;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
var requestParser = new ClientRequestParser(requestOptions, request);
// Add the source ikey hash to the request headers, if a value was not already provided.
// The getHeader/setHeader methods aren&#x27;t available on very old Node versions, and
// are not included in the v0.10 type declarations currently used. So check if the
// methods exist before invoking them.
if (client.config &#x26;&#x26; client.config.instrumentationKeyHash &#x26;&#x26;
    Util.canIncludeCorrelationHeader(client, requestParser.<span class="apidocCodeKeywordSpan">getUrl</span>()) &#x26;&#x26;
    request[&#x27;getHeader&#x27;] &#x26;&#x26; request[&#x27;setHeader&#x27;] &#x26;&#x26;
    !request[&#x27;getHeader&#x27;](RequestResponseHeaders.sourceInstrumentationKeyHeader)) {
    request[&#x27;setHeader&#x27;](RequestResponseHeaders.sourceInstrumentationKeyHeader, client.config.instrumentationKeyHash);
}
// Collect dependency telemetry about the request when it finishes.
if (request.on) {
    request.on(&#x27;response&#x27;, function (response) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Sender" id="apidoc.module.applicationinsights.Sender">module applicationinsights.Sender</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Sender.Sender" id="apidoc.element.applicationinsights.Sender.Sender">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Sender
        <span class="apidocSignatureSpan">(getUrl, onSuccess, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Sender(getUrl, onSuccess, onError) {
    this._getUrl = getUrl;
    this._onSuccess = onSuccess;
    this._onError = onError;
    this._enableOfflineMode = false;
    this._resendInterval = Sender.WAIT_BETWEEN_RESEND;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Sender.prototype" id="apidoc.module.applicationinsights.Sender.prototype">module applicationinsights.Sender.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Sender.prototype._confirmDirExists" id="apidoc.element.applicationinsights.Sender.prototype._confirmDirExists">
        function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>_confirmDirExists
        <span class="apidocSignatureSpan">(direcotry, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_confirmDirExists = function (direcotry, callback) {
    fs.exists(direcotry, function (exists) {
        if (!exists) {
            fs.mkdir(direcotry, function (err) {
                callback(err);
            });
        }
        else {
            callback(null);
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Stores the payload as a json file on disk in the temp direcotry
 */
Sender.prototype._storeToDisk = function (payload) {
    var _this = this;
    //ensure directory is created
    var direcotry = path.join(os.tmpdir(), Sender.TEMPDIR);
    this.<span class="apidocCodeKeywordSpan">_confirmDirExists</span>(direcotry, function (error) {
        if (error) {
            _this._onErrorHelper(error);
            return;
        }
        //create file - file name for now is the timestamp, a better approach would be a UUID but that
        //would require an external dependency
        var fileName = new Date().getTime() + &#x22;.ai.json&#x22;;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Sender.prototype._onErrorHelper" id="apidoc.element.applicationinsights.Sender.prototype._onErrorHelper">
        function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>_onErrorHelper
        <span class="apidocSignatureSpan">(error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onErrorHelper = function (error) {
    if (typeof this._onError === &#x22;function&#x22;) {
        this._onError(error);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};
var req = (parsedUrl.protocol == &#x22;https:&#x22;) ?
    https.request(options, requestCallback) :
    http.request(options, requestCallback);
req.on(&#x22;error&#x22;, function (error) {
    // todo: handle error codes better (group to recoverable/non-recoverable and persist)
    Logging.warn(Sender.TAG, error);
    _this.<span class="apidocCodeKeywordSpan">_onErrorHelper</span>(error);
    if (typeof callback === &#x22;function&#x22;) {
        var errorMessage = &#x22;error sending telemetry&#x22;;
        if (error &#x26;&#x26; (typeof error.toString === &#x22;function&#x22;)) {
            errorMessage = error.toString();
        }
        callback(errorMessage);
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Sender.prototype._sendFirstFileOnDisk" id="apidoc.element.applicationinsights.Sender.prototype._sendFirstFileOnDisk">
        function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>_sendFirstFileOnDisk
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_sendFirstFileOnDisk = function () {
    var _this = this;
    var tempDir = path.join(os.tmpdir(), Sender.TEMPDIR);
    fs.exists(tempDir, function (exists) {
        if (exists) {
            fs.readdir(tempDir, function (error, files) {
                if (!error) {
                    files = files.filter(function (f) { return path.basename(f).indexOf(&#x22;.ai.json&#x22;) &#x3e; -1; });
                    if (files.length &#x3e; 0) {
                        var firstFile = files[0];
                        var filePath = path.join(tempDir, firstFile);
                        fs.readFile(filePath, function (error, payload) {
                            if (!error) {
                                // delete the file first to prevent double sending
                                fs.unlink(filePath, function (error) {
                                    if (!error) {
                                        _this.send(payload);
                                    }
                                    else {
                                        _this._onErrorHelper(error);
                                    }
                                });
                            }
                            else {
                                _this._onErrorHelper(error);
                            }
                        });
                    }
                }
                else {
                    _this._onErrorHelper(error);
                }
            });
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
if (typeof callback === &#x22;function&#x22;) {
    callback(responseString);
}
if (_this._enableOfflineMode) {
    // try to send any cached events if the user is back online
    if (res.statusCode === 200) {
        setTimeout(function () { return _this.<span class="apidocCodeKeywordSpan">_sendFirstFileOnDisk</span>(); }, _this._resendInterval
);
    }
    else if (res.statusCode === 206 ||
        res.statusCode === 429 ||
        res.statusCode === 439) {
        _this._storeToDisk(payload);
    }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Sender.prototype._storeToDisk" id="apidoc.element.applicationinsights.Sender.prototype._storeToDisk">
        function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>_storeToDisk
        <span class="apidocSignatureSpan">(payload)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_storeToDisk = function (payload) {
    var _this = this;
    //ensure directory is created
    var direcotry = path.join(os.tmpdir(), Sender.TEMPDIR);
    this._confirmDirExists(direcotry, function (error) {
        if (error) {
            _this._onErrorHelper(error);
            return;
        }
        //create file - file name for now is the timestamp, a better approach would be a UUID but that
        //would require an external dependency
        var fileName = new Date().getTime() + &#x22;.ai.json&#x22;;
        var fileFullPath = path.join(direcotry, fileName);
        Logging.info(Sender.TAG, &#x22;saving data to disk at: &#x22; + fileFullPath);
        fs.writeFile(fileFullPath, payload, function (error) { return _this._onErrorHelper(error); });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            // try to send any cached events if the user is back online
            if (res.statusCode === 200) {
                setTimeout(function () { return _this._sendFirstFileOnDisk(); }, _this._resendInterval);
            }
            else if (res.statusCode === 206 ||
                res.statusCode === 429 ||
                res.statusCode === 439) {
                _this.<span class="apidocCodeKeywordSpan">_storeToDisk</span>(payload);
            }
        }
    });
};
var req = (parsedUrl.protocol == &#x22;https:&#x22;) ?
    https.request(options, requestCallback) :
    http.request(options, requestCallback);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Sender.prototype._storeToDiskSync" id="apidoc.element.applicationinsights.Sender.prototype._storeToDiskSync">
        function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>_storeToDiskSync
        <span class="apidocSignatureSpan">(payload)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_storeToDiskSync = function (payload) {
    var direcotry = path.join(os.tmpdir(), Sender.TEMPDIR);
    try {
        if (!fs.existsSync(direcotry)) {
            fs.mkdirSync(direcotry);
        }
        //create file - file name for now is the timestamp, a better approach would be a UUID but that
        //would require an external dependency
        var fileName = new Date().getTime() + &#x22;.ai.json&#x22;;
        var fileFullPath = path.join(direcotry, fileName);
        Logging.info(Sender.TAG, &#x22;saving data before crash to disk at: &#x22; + fileFullPath);
        fs.writeFileSync(fileFullPath, payload);
    }
    catch (error) {
        this._onErrorHelper(error);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            }
        });
        req.write(dataToSend);
        req.end();
    });
};
Sender.prototype.saveOnCrash = function (payload) {
    this.<span class="apidocCodeKeywordSpan">_storeToDiskSync</span>(payload);
};
Sender.prototype._confirmDirExists = function (direcotry, callback) {
    fs.exists(direcotry, function (exists) {
        if (!exists) {
            fs.mkdir(direcotry, function (err) {
                callback(err);
            });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Sender.prototype.saveOnCrash" id="apidoc.element.applicationinsights.Sender.prototype.saveOnCrash">
        function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>saveOnCrash
        <span class="apidocSignatureSpan">(payload)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">saveOnCrash = function (payload) {
    this._storeToDiskSync(payload);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {
var bufferIsEmpty = this._buffer.length &#x3c; 1;
if (!bufferIsEmpty) {
    // compose an array of payloads
    var batch = this._buffer.join(&#x22;\n&#x22;);
    // invoke send
    if (isNodeCrashing) {
        this._sender.<span class="apidocCodeKeywordSpan">saveOnCrash</span>(batch);
        if (typeof callback === &#x22;function&#x22;) {
            callback(&#x22;data saved on crash&#x22;);
        }
    }
    else {
        this._sender.send(new Buffer(batch), callback);
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Sender.prototype.send" id="apidoc.element.applicationinsights.Sender.prototype.send">
        function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>send
        <span class="apidocSignatureSpan">(payload, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">send = function (payload, callback) {
    var _this = this;
    var endpointUrl = this._getUrl();
    if (endpointUrl &#x26;&#x26; endpointUrl.indexOf(&#x22;//&#x22;) === 0) {
        // use https if the config did not specify a protocol
        endpointUrl = &#x22;https:&#x22; + endpointUrl;
    }
    // todo: investigate specifying an agent here: https://nodejs.org/api/http.html#http_class_http_agent
    var parsedUrl = url.parse(endpointUrl);
    var options = {
        host: parsedUrl.hostname,
        port: parsedUrl.port,
        path: parsedUrl.pathname,
        method: &#x22;POST&#x22;,
        headers: {
            &#x22;Content-Type&#x22;: &#x22;application/x-json-stream&#x22;
        }
    };
    zlib.gzip(payload, function (err, buffer) {
        var dataToSend = buffer;
        if (err) {
            Logging.warn(err);
            dataToSend = payload; // something went wrong so send without gzip
            options.headers[&#x22;Content-Length&#x22;] = payload.length;
        }
        else {
            options.headers[&#x22;Content-Encoding&#x22;] = &#x22;gzip&#x22;;
            options.headers[&#x22;Content-Length&#x22;] = buffer.length;
        }
        Logging.info(Sender.TAG, options);
        // Ensure this request is not captured by auto-collection.
        options[AutoCollectClientRequests.disableCollectionRequestOption] = true;
        var requestCallback = function (res) {
            res.setEncoding(&#x22;utf-8&#x22;);
            //returns empty if the data is accepted
            var responseString = &#x22;&#x22;;
            res.on(&#x22;data&#x22;, function (data) {
                responseString += data;
            });
            res.on(&#x22;end&#x22;, function () {
                Logging.info(Sender.TAG, responseString);
                if (typeof _this._onSuccess === &#x22;function&#x22;) {
                    _this._onSuccess(responseString);
                }
                if (typeof callback === &#x22;function&#x22;) {
                    callback(responseString);
                }
                if (_this._enableOfflineMode) {
                    // try to send any cached events if the user is back online
                    if (res.statusCode === 200) {
                        setTimeout(function () { return _this._sendFirstFileOnDisk(); }, _this._resendInterval);
                    }
                    else if (res.statusCode === 206 ||
                        res.statusCode === 429 ||
                        res.statusCode === 439) {
                        _this._storeToDisk(payload);
                    }
                }
            });
        };
        var req = (parsedUrl.protocol == &#x22;https:&#x22;) ?
            https.request(options, requestCallback) :
            http.request(options, requestCallback);
        req.on(&#x22;error&#x22;, function (error) {
            // todo: handle error codes better (group to recoverable/non-recoverable and persist)
            Logging.warn(Sender.TAG, error);
            _this._onErrorHelper(error);
            if (typeof callback === &#x22;function&#x22;) {
                var errorMessage = &#x22;error sending telemetry&#x22;;
                if (error &#x26;&#x26; (typeof error.toString === &#x22;function&#x22;)) {
                    errorMessage = error.toString();
                }
                callback(errorMessage);
            }
            if (_this._enableOfflineMode) {
                _this._storeToDisk(payload);
            }
        });
        req.write(dataToSend);
        req.end();
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (isNodeCrashing) {
        this._sender.saveOnCrash(batch);
        if (typeof callback === &#x22;function&#x22;) {
            callback(&#x22;data saved on crash&#x22;);
        }
    }
    else {
        this._sender.<span class="apidocCodeKeywordSpan">send</span>(new Buffer(batch), callback);
    }
}
// update lastSend time to enable throttling
this._lastSend = +new Date;
// clear buffer
this._buffer.length = 0;
clearTimeout(this._timeoutHandle);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Sender.prototype.setOfflineMode" id="apidoc.element.applicationinsights.Sender.prototype.setOfflineMode">
        function <span class="apidocSignatureSpan">applicationinsights.Sender.prototype.</span>setOfflineMode
        <span class="apidocSignatureSpan">(value, resendInterval)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setOfflineMode = function (value, resendInterval) {
    this._enableOfflineMode = value;
    if (typeof resendInterval === &#x27;number&#x27; &#x26;&#x26; resendInterval &#x3e;= 0) {
        this._resendInterval = Math.floor(resendInterval);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this._getBatchIntervalMs = getBatchIntervalMs;
    this._sender = sender;
}
/**
 * Enable or disable offline mode
 */
Channel.prototype.setOfflineMode = function (value, resendInterval) {
    this._sender.<span class="apidocCodeKeywordSpan">setOfflineMode</span>(value, resendInterval);
};
/**
 * Add a telemetry item to the send buffer
 */
Channel.prototype.send = function (envelope) {
    var _this = this;
    // if master off switch is set, don&#x27;t send any data
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.ServerRequestParser" id="apidoc.module.applicationinsights.ServerRequestParser">module applicationinsights.ServerRequestParser</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.ServerRequestParser" id="apidoc.element.applicationinsights.ServerRequestParser.ServerRequestParser">
        function <span class="apidocSignatureSpan">applicationinsights.</span>ServerRequestParser
        <span class="apidocSignatureSpan">(request, requestId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ServerRequestParser(request, requestId) {
    _super.call(this);
    if (request) {
        this.requestId = requestId || Util.newGuid();
        this.method = request.method;
        this.url = this._getAbsoluteUrl(request);
        this.startTime = +new Date();
        this.rawHeaders = request.headers || request.rawHeaders;
        this.socketRemoteAddress = request.socket &#x26;&#x26; request.socket.remoteAddress;
        this.userAgent = request.headers &#x26;&#x26; request.headers[&#x22;user-agent&#x22;];
        this.sourceIKeyHash =
            request.headers &#x26;&#x26; request.headers[RequestResponseHeaders.sourceInstrumentationKeyHeader];
        this.parentId =
            request.headers &#x26;&#x26; request.headers[RequestResponseHeaders.parentIdHeader];
        this.operationId =
            request.headers &#x26;&#x26; request.headers[RequestResponseHeaders.rootIdHeader];
        if (request.connection) {
            this.connectionRemoteAddress = request.connection.remoteAddress;
            this.legacySocketRemoteAddress = request.connection[&#x22;socket&#x22;] &#x26;&#x26; request.connection[&#x22;socket&#x22;].remoteAddress;
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.parseId" id="apidoc.element.applicationinsights.ServerRequestParser.parseId">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.</span>parseId
        <span class="apidocSignatureSpan">(cookieValue)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseId = function (cookieValue) {
    return cookieValue.substr(0, cookieValue.indexOf(&#x27;|&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        ip = &#x22;127.0.0.1&#x22;;
    }
    return ip;
};
ServerRequestParser.prototype._getId = function (name) {
    var cookie = (this.rawHeaders &#x26;&#x26; this.rawHeaders[&#x22;cookie&#x22;] &#x26;&#x26;
        typeof this.rawHeaders[&#x22;cookie&#x22;] === &#x27;string&#x27; &#x26;&#x26; this.rawHeaders[&#x22;cookie&#x22;]) || &#
x22;&#x22;;
    var value = ServerRequestParser.<span class="apidocCodeKeywordSpan">parseId</span>(Util.getCookie(name, cookie));
    return value;
};
ServerRequestParser.parseId = function (cookieValue) {
    return cookieValue.substr(0, cookieValue.indexOf(&#x27;|&#x27;));
};
ServerRequestParser.keys = new ContractsModule.Contracts.ContextTagKeys();
return ServerRequestParser;
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.ServerRequestParser.prototype" id="apidoc.module.applicationinsights.ServerRequestParser.prototype">module applicationinsights.ServerRequestParser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.prototype._getAbsoluteUrl" id="apidoc.element.applicationinsights.ServerRequestParser.prototype._getAbsoluteUrl">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>_getAbsoluteUrl
        <span class="apidocSignatureSpan">(request)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getAbsoluteUrl = function (request) {
    if (!request.headers) {
        return request.url;
    }
    var encrypted = request.connection ? request.connection.encrypted : null;
    var requestUrl = url.parse(request.url);
    var pathName = requestUrl.pathname;
    var search = requestUrl.search;
    var absoluteUrl = url.format({
        protocol: encrypted ? &#x22;https&#x22; : &#x22;http&#x22;,
        host: request.headers.host,
        pathname: pathName,
        search: search
    });
    return absoluteUrl;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var ServerRequestParser = (function (_super) {
__extends(ServerRequestParser, _super);
function ServerRequestParser(request, requestId) {
    _super.call(this);
    if (request) {
        this.requestId = requestId || Util.newGuid();
        this.method = request.method;
        this.url = this.<span class="apidocCodeKeywordSpan">_getAbsoluteUrl</span>(request);
        this.startTime = +new Date();
        this.rawHeaders = request.headers || request.rawHeaders;
        this.socketRemoteAddress = request.socket &#x26;&#x26; request.socket.remoteAddress;
        this.userAgent = request.headers &#x26;&#x26; request.headers[&#x22;user-agent&#x22;];
        this.sourceIKeyHash =
            request.headers &#x26;&#x26; request.headers[RequestResponseHeaders.sourceInstrumentationKeyHeader];
        this.parentId =
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.prototype._getId" id="apidoc.element.applicationinsights.ServerRequestParser.prototype._getId">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>_getId
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getId = function (name) {
    var cookie = (this.rawHeaders &#x26;&#x26; this.rawHeaders[&#x22;cookie&#x22;] &#x26;&#x26;
        typeof this.rawHeaders[&#x22;cookie&#x22;] === &#x27;string&#x27; &#x26;&#x26; this.rawHeaders[&#x22;cookie&#x22;]) || &#x22;&#x22;;
    var value = ServerRequestParser.parseId(Util.getCookie(name, cookie));
    return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // create a copy of the context for requests since client info will be used here
    var newTags = {};
    for (var key in tags) {
        newTags[key] = tags[key];
    }
    // don&#x27;t override tags if they are already set
    newTags[ServerRequestParser.keys.locationIp] = tags[ServerRequestParser.keys.locationIp] || this._getIp();
    newTags[ServerRequestParser.keys.sessionId] = tags[ServerRequestParser.keys.sessionId] || this.<span class="apidocCodeKeywordSpan
">_getId</span>(&#x22;ai_session&#x22;);
    newTags[ServerRequestParser.keys.userId] = tags[ServerRequestParser.keys.userId] || this._getId(&#x22;ai_user&#x22;);
    newTags[ServerRequestParser.keys.userAgent] = tags[ServerRequestParser.keys.userAgent] || this.userAgent;
    newTags[ServerRequestParser.keys.operationName] = this.getOperationName(tags);
    newTags[ServerRequestParser.keys.operationParentId] = this.getOperationParentId(tags);
    newTags[ServerRequestParser.keys.operationId] = this.getOperationId(tags);
    return newTags;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.prototype._getIp" id="apidoc.element.applicationinsights.ServerRequestParser.prototype._getIp">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>_getIp
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getIp = function () {
    // regex to match ipv4 without port
    // Note: including the port would cause the payload to be rejected by the data collector
    var ipMatch = /[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/;
    var check = function (str) {
        var results = ipMatch.exec(str);
        if (results) {
            return results[0];
        }
    };
    var ip = check(this.rawHeaders[&#x22;x-forwarded-for&#x22;])
        || check(this.rawHeaders[&#x22;x-client-ip&#x22;])
        || check(this.rawHeaders[&#x22;x-real-ip&#x22;])
        || check(this.connectionRemoteAddress)
        || check(this.socketRemoteAddress)
        || check(this.legacySocketRemoteAddress);
    // node v12 returns this if the address is &#x22;localhost&#x22;
    if (!ip
        &#x26;&#x26; this.connectionRemoteAddress
        &#x26;&#x26; this.connectionRemoteAddress.substr
        &#x26;&#x26; this.connectionRemoteAddress.substr(0, 2) === &#x22;::&#x22;) {
        ip = &#x22;127.0.0.1&#x22;;
    }
    return ip;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    ServerRequestParser.prototype.getRequestTags = function (tags) {
// create a copy of the context for requests since client info will be used here
var newTags = {};
for (var key in tags) {
    newTags[key] = tags[key];
}
// don&#x27;t override tags if they are already set
newTags[ServerRequestParser.keys.locationIp] = tags[ServerRequestParser.keys.locationIp] || this.<span class="apidocCodeKeywordSpan
">_getIp</span>();
newTags[ServerRequestParser.keys.sessionId] = tags[ServerRequestParser.keys.sessionId] || this._getId(&#x22;ai_session&#x22;);
newTags[ServerRequestParser.keys.userId] = tags[ServerRequestParser.keys.userId] || this._getId(&#x22;ai_user&#x22;);
newTags[ServerRequestParser.keys.userAgent] = tags[ServerRequestParser.keys.userAgent] || this.userAgent;
newTags[ServerRequestParser.keys.operationName] = this.getOperationName(tags);
newTags[ServerRequestParser.keys.operationParentId] = this.getOperationParentId(tags);
newTags[ServerRequestParser.keys.operationId] = this.getOperationId(tags);
return newTags;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.constructor" id="apidoc.element.applicationinsights.ServerRequestParser.prototype.constructor">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>constructor
        <span class="apidocSignatureSpan">(request, requestId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ServerRequestParser(request, requestId) {
    _super.call(this);
    if (request) {
        this.requestId = requestId || Util.newGuid();
        this.method = request.method;
        this.url = this._getAbsoluteUrl(request);
        this.startTime = +new Date();
        this.rawHeaders = request.headers || request.rawHeaders;
        this.socketRemoteAddress = request.socket &#x26;&#x26; request.socket.remoteAddress;
        this.userAgent = request.headers &#x26;&#x26; request.headers[&#x22;user-agent&#x22;];
        this.sourceIKeyHash =
            request.headers &#x26;&#x26; request.headers[RequestResponseHeaders.sourceInstrumentationKeyHeader];
        this.parentId =
            request.headers &#x26;&#x26; request.headers[RequestResponseHeaders.parentIdHeader];
        this.operationId =
            request.headers &#x26;&#x26; request.headers[RequestResponseHeaders.rootIdHeader];
        if (request.connection) {
            this.connectionRemoteAddress = request.connection.remoteAddress;
            this.legacySocketRemoteAddress = request.connection[&#x22;socket&#x22;] &#x26;&#x26; request.connection[&#x22;socket&#x22;].remoteAddress;
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.getOperationId" id="apidoc.element.applicationinsights.ServerRequestParser.prototype.getOperationId">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>getOperationId
        <span class="apidocSignatureSpan">(tags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getOperationId = function (tags) {
    return tags[ServerRequestParser.keys.operationId] || this.operationId;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // don&#x27;t override tags if they are already set
    newTags[ServerRequestParser.keys.locationIp] = tags[ServerRequestParser.keys.locationIp] || this._getIp();
    newTags[ServerRequestParser.keys.sessionId] = tags[ServerRequestParser.keys.sessionId] || this._getId(&#x22;ai_session&#x22;);
    newTags[ServerRequestParser.keys.userId] = tags[ServerRequestParser.keys.userId] || this._getId(&#x22;ai_user&#x22;);
    newTags[ServerRequestParser.keys.userAgent] = tags[ServerRequestParser.keys.userAgent] || this.userAgent;
    newTags[ServerRequestParser.keys.operationName] = this.getOperationName(tags);
    newTags[ServerRequestParser.keys.operationParentId] = this.getOperationParentId(tags);
    newTags[ServerRequestParser.keys.operationId] = this.<span class="apidocCodeKeywordSpan">getOperationId</span>(tags);
    return newTags;
};
ServerRequestParser.prototype.getOperationId = function (tags) {
    return tags[ServerRequestParser.keys.operationId] || this.operationId;
};
ServerRequestParser.prototype.getOperationParentId = function (tags) {
    return tags[ServerRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.getOperationName" id="apidoc.element.applicationinsights.ServerRequestParser.prototype.getOperationName">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>getOperationName
        <span class="apidocSignatureSpan">(tags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getOperationName = function (tags) {
    return tags[ServerRequestParser.keys.operationName] || this.method + &#x22; &#x22; + url.parse(this.url).pathname;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        newTags[key] = tags[key];
    }
    // don&#x27;t override tags if they are already set
    newTags[ServerRequestParser.keys.locationIp] = tags[ServerRequestParser.keys.locationIp] || this._getIp();
    newTags[ServerRequestParser.keys.sessionId] = tags[ServerRequestParser.keys.sessionId] || this._getId(&#x22;ai_session&#x22;);
    newTags[ServerRequestParser.keys.userId] = tags[ServerRequestParser.keys.userId] || this._getId(&#x22;ai_user&#x22;);
    newTags[ServerRequestParser.keys.userAgent] = tags[ServerRequestParser.keys.userAgent] || this.userAgent;
    newTags[ServerRequestParser.keys.operationName] = this.<span class="apidocCodeKeywordSpan">getOperationName</span>(tags);
    newTags[ServerRequestParser.keys.operationParentId] = this.getOperationParentId(tags);
    newTags[ServerRequestParser.keys.operationId] = this.getOperationId(tags);
    return newTags;
};
ServerRequestParser.prototype.getOperationId = function (tags) {
    return tags[ServerRequestParser.keys.operationId] || this.operationId;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.getOperationParentId" id="apidoc.element.applicationinsights.ServerRequestParser.prototype.getOperationParentId">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>getOperationParentId
        <span class="apidocSignatureSpan">(tags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getOperationParentId = function (tags) {
    return tags[ServerRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    // don&#x27;t override tags if they are already set
    newTags[ServerRequestParser.keys.locationIp] = tags[ServerRequestParser.keys.locationIp] || this._getIp();
    newTags[ServerRequestParser.keys.sessionId] = tags[ServerRequestParser.keys.sessionId] || this._getId(&#x22;ai_session&#x22;);
    newTags[ServerRequestParser.keys.userId] = tags[ServerRequestParser.keys.userId] || this._getId(&#x22;ai_user&#x22;);
    newTags[ServerRequestParser.keys.userAgent] = tags[ServerRequestParser.keys.userAgent] || this.userAgent;
    newTags[ServerRequestParser.keys.operationName] = this.getOperationName(tags);
    newTags[ServerRequestParser.keys.operationParentId] = this.<span class="apidocCodeKeywordSpan">getOperationParentId</span>(tags
);
    newTags[ServerRequestParser.keys.operationId] = this.getOperationId(tags);
    return newTags;
};
ServerRequestParser.prototype.getOperationId = function (tags) {
    return tags[ServerRequestParser.keys.operationId] || this.operationId;
};
ServerRequestParser.prototype.getOperationParentId = function (tags) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.getRequestData" id="apidoc.element.applicationinsights.ServerRequestParser.prototype.getRequestData">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>getRequestData
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getRequestData = function () {
    var requestData = new ContractsModule.Contracts.RequestData();
    requestData.id = this.requestId;
    requestData.name = this.method + &#x22; &#x22; + url.parse(this.url).pathname;
    requestData.url = this.url;
    requestData.source = this.sourceIKeyHash;
    requestData.duration = Util.msToTimeSpan(this.duration);
    requestData.responseCode = this.statusCode ? this.statusCode.toString() : null;
    requestData.success = this._isSuccess();
    requestData.properties = this.properties;
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;Microsoft.ApplicationInsights.RequestData&#x22;;
    data.baseData = requestData;
    return data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (error) {
        requestParser.onError(error, properties, ellapsedMilliseconds);
    }
    else {
        requestParser.onResponse(response, properties, ellapsedMilliseconds);
    }
    var context = { &#x22;http.ServerRequest&#x22;: request, &#x22;http.ServerResponse&#x22;: response };
    var data = requestParser.<span class="apidocCodeKeywordSpan">getRequestData</span>();
    var tags = requestParser.getRequestTags(client.context.tags);
    client.track(data, tags, context);
};
AutoCollectServerRequests.prototype.dispose = function () {
    AutoCollectServerRequests.INSTANCE = null;
    this._isInitialized = false;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.getRequestId" id="apidoc.element.applicationinsights.ServerRequestParser.prototype.getRequestId">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>getRequestId
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getRequestId = function () {
    return this.requestId;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
AutoCollectServerRequests.prototype.isAutoCorrelating = function () {
    return this._isAutoCorrelating;
};
AutoCollectServerRequests.prototype._generateCorrelationContext = function (requestParser) {
    if (!this._isAutoCorrelating) {
        return;
    }
    return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.<span class="apidocCodeKeywordSpan
">getRequestId</span>(), requestParser.getOperationName(this._client.context.tags), requestParser.getOperationId(this._client.context
.tags));
};
AutoCollectServerRequests.prototype._initialize = function () {
    var _this = this;
    this._isInitialized = true;
    var originalHttpServer = http.createServer;
    http.createServer = function (onRequest) {
        // todo: get a pointer to the server so the IP address can be read from server.address
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.getRequestTags" id="apidoc.element.applicationinsights.ServerRequestParser.prototype.getRequestTags">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>getRequestTags
        <span class="apidocSignatureSpan">(tags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getRequestTags = function (tags) {
    // create a copy of the context for requests since client info will be used here
    var newTags = {};
    for (var key in tags) {
        newTags[key] = tags[key];
    }
    // don&#x27;t override tags if they are already set
    newTags[ServerRequestParser.keys.locationIp] = tags[ServerRequestParser.keys.locationIp] || this._getIp();
    newTags[ServerRequestParser.keys.sessionId] = tags[ServerRequestParser.keys.sessionId] || this._getId(&#x22;ai_session&#x22;);
    newTags[ServerRequestParser.keys.userId] = tags[ServerRequestParser.keys.userId] || this._getId(&#x22;ai_user&#x22;);
    newTags[ServerRequestParser.keys.userAgent] = tags[ServerRequestParser.keys.userAgent] || this.userAgent;
    newTags[ServerRequestParser.keys.operationName] = this.getOperationName(tags);
    newTags[ServerRequestParser.keys.operationParentId] = this.getOperationParentId(tags);
    newTags[ServerRequestParser.keys.operationId] = this.getOperationId(tags);
    return newTags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        requestParser.onError(error, properties, ellapsedMilliseconds);
    }
    else {
        requestParser.onResponse(response, properties, ellapsedMilliseconds);
    }
    var context = { &#x22;http.ServerRequest&#x22;: request, &#x22;http.ServerResponse&#x22;: response };
    var data = requestParser.getRequestData();
    var tags = requestParser.<span class="apidocCodeKeywordSpan">getRequestTags</span>(client.context.tags);
    client.track(data, tags, context);
};
AutoCollectServerRequests.prototype.dispose = function () {
    AutoCollectServerRequests.INSTANCE = null;
    this._isInitialized = false;
};
return AutoCollectServerRequests;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.onError" id="apidoc.element.applicationinsights.ServerRequestParser.prototype.onError">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>onError
        <span class="apidocSignatureSpan">(error, properties, ellapsedMilliseconds)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onError = function (error, properties, ellapsedMilliseconds) {
    this._setStatus(undefined, error, properties);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (request.on) {
        request.on(&#x27;response&#x27;, function (response) {
            requestParser.onResponse(response, properties);
            var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;http
.ClientResponse&#x22;: response };
            client.track(requestParser.getDependencyData(), null, context);
        });
        request.on(&#x27;error&#x27;, function (e) {
            requestParser.<span class="apidocCodeKeywordSpan">onError</span>(e, properties);
            var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;Error
&#x22;: e };
            client.track(requestParser.getDependencyData(), null, context);
        });
    }
};
AutoCollectClientRequests.prototype.dispose = function () {
    AutoCollectClientRequests.INSTANCE = null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequestParser.prototype.onResponse" id="apidoc.element.applicationinsights.ServerRequestParser.prototype.onResponse">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequestParser.prototype.</span>onResponse
        <span class="apidocSignatureSpan">(response, properties, ellapsedMilliseconds)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onResponse = function (response, properties, ellapsedMilliseconds) {
    this._setStatus(response.statusCode, undefined, properties);
    if (ellapsedMilliseconds) {
        this.duration = ellapsedMilliseconds;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    request[&#x27;getHeader&#x27;] &#x26;&#x26; request[&#x27;setHeader&#x27;] &#x26;&#x26;
    !request[&#x27;getHeader&#x27;](RequestResponseHeaders.sourceInstrumentationKeyHeader)) {
    request[&#x27;setHeader&#x27;](RequestResponseHeaders.sourceInstrumentationKeyHeader, client.config.instrumentationKeyHash);
}
// Collect dependency telemetry about the request when it finishes.
if (request.on) {
    request.on(&#x27;response&#x27;, function (response) {
        requestParser.<span class="apidocCodeKeywordSpan">onResponse</span>(response, properties);
        var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;http.ClientResponse
&#x22;: response };
        client.track(requestParser.getDependencyData(), null, context);
    });
    request.on(&#x27;error&#x27;, function (e) {
        requestParser.onError(e, properties);
        var context = { &#x22;http.RequestOptions&#x22;: requestOptions, &#x22;http.ClientRequest&#x22;: request, &#x22;Error&#x22
;: e };
        client.track(requestParser.getDependencyData(), null, context);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.ServerRequests" id="apidoc.module.applicationinsights.ServerRequests">module applicationinsights.ServerRequests</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests.ServerRequests" id="apidoc.element.applicationinsights.ServerRequests.ServerRequests">
        function <span class="apidocSignatureSpan">applicationinsights.</span>ServerRequests
        <span class="apidocSignatureSpan">(client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AutoCollectServerRequests(client) {
    if (!!AutoCollectServerRequests.INSTANCE) {
        throw new Error(&#x22;Server request tracking should be configured from the applicationInsights object&#x22;);
    }
    AutoCollectServerRequests.INSTANCE = this;
    this._client = client;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests.addResponseIKeyHeader" id="apidoc.element.applicationinsights.ServerRequests.addResponseIKeyHeader">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.</span>addResponseIKeyHeader
        <span class="apidocSignatureSpan">(client, response)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addResponseIKeyHeader = function (client, response) {
    if (client.config &#x26;&#x26; client.config.instrumentationKeyHash &#x26;&#x26;
        response.getHeader &#x26;&#x26; response.setHeader &#x26;&#x26;
        !response.getHeader(RequestResponseHeaders.targetInstrumentationKeyHeader) &#x26;&#x26;
        !response.headersSent) {
        response.setHeader(RequestResponseHeaders.targetInstrumentationKeyHeader, client.config.instrumentationKeyHash);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Tracks a request synchronously (doesn&#x27;t wait for response &#x27;finish&#x27; event)
 */
AutoCollectServerRequests.trackRequestSync = function (client, request, response, ellapsedMilliseconds, properties, error) {
    if (!request || !response || !client) {
        Logging.info(&#x22;AutoCollectServerRequests.trackRequestSync was called with invalid parameters: &#x22;, !request, !response
, !client);
        return;
    }
    AutoCollectServerRequests.<span class="apidocCodeKeywordSpan">addResponseIKeyHeader</span>(client, response);
    // store data about the request
    var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();
    var requestParser = new ServerRequestParser(request, (correlationContext &#x26;&#x26; correlationContext.operation.parentId) ||
Util.newGuid());
    // Overwrite correlation context with request parser results
    if (correlationContext) {
        correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;
        correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.
name;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests.endRequest" id="apidoc.element.applicationinsights.ServerRequests.endRequest">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.</span>endRequest
        <span class="apidocSignatureSpan">(client, requestParser, request, response, ellapsedMilliseconds, properties, error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">endRequest = function (client, requestParser, request, response, ellapsedMilliseconds, properties, error) {
    if (error) {
        requestParser.onError(error, properties, ellapsedMilliseconds);
    }
    else {
        requestParser.onResponse(response, properties, ellapsedMilliseconds);
    }
    var context = { &#x22;http.ServerRequest&#x22;: request, &#x22;http.ServerResponse&#x22;: response };
    var data = requestParser.getRequestData();
    var tags = requestParser.getRequestTags(client.context.tags);
    client.track(data, tags, context);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var requestParser = new ServerRequestParser(request, (correlationContext &#x26;&#x26; correlationContext.operation.parentId) ||
Util.newGuid());
    // Overwrite correlation context with request parser results
    if (correlationContext) {
        correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;
        correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.
name;
        correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;
    }
    AutoCollectServerRequests.<span class="apidocCodeKeywordSpan">endRequest</span>(client, requestParser, request, response, ellapsedMilliseconds
, properties, error);
};
/**
 * Tracks a request by listening to the response &#x27;finish&#x27; event
 */
AutoCollectServerRequests.trackRequest = function (client, request, response, properties, _requestParser) {
    if (!request || !response || !client) {
        Logging.info(&#x22;AutoCollectServerRequests.trackRequest was called with invalid parameters: &#x22;, !request, !response
, !client);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests.trackRequest" id="apidoc.element.applicationinsights.ServerRequests.trackRequest">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.</span>trackRequest
        <span class="apidocSignatureSpan">(client, request, response, properties, _requestParser)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trackRequest = function (client, request, response, properties, _requestParser) {
    if (!request || !response || !client) {
        Logging.info(&#x22;AutoCollectServerRequests.trackRequest was called with invalid parameters: &#x22;, !request, !response, !client
);
        return;
    }
    // store data about the request
    var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();
    var requestParser = _requestParser || new ServerRequestParser(request, correlationContext &#x26;&#x26; correlationContext.operation.parentId
 || Util.newGuid());
    if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {
        AutoCollectServerRequests.addResponseIKeyHeader(client, response);
    }
    // Overwrite correlation context with request parser results (if not an automatic track. we&#x27;ve already precalculated the correlation
 context in that case)
    if (correlationContext &#x26;&#x26; !_requestParser) {
        correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;
        correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.
name;
        correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation
.parentId;
    }
    // response listeners
    if (response.once) {
        response.once(&#x22;finish&#x22;, function () {
            AutoCollectServerRequests.endRequest(client, requestParser, request, response, null, properties, null);
        });
    }
    // track a failed request if an error is emitted
    if (request.on) {
        request.on(&#x22;error&#x22;, function (error) {
            AutoCollectServerRequests.endRequest(client, requestParser, request, response, null, properties, error);
        });
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
http.request = function (options) {
    var requestArgs = [];
    for (var _i = 1; _i &#x3c; arguments.length; _i++) {
        requestArgs[_i - 1] = arguments[_i];
    }
    var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));
    if (request &#x26;&#x26; options &#x26;&#x26; !options[AutoCollectClientRequests.disableCollectionRequestOption]) {
        AutoCollectClientRequests.<span class="apidocCodeKeywordSpan">trackRequest</span>(_this._client, options, request);
    }
    return request;
};
// On node &#x3e;= v0.11.12, https.request just calls http.request (with additional options).
// But on older versions, https.request needs to be patched also.
// The regex matches versions &#x3c; 0.11.12 (avoiding a semver package dependency).
if (/^0\.([0-9]\.)|(10\.)|(11\.([0-9]|10|11)$)/.test(process.versions.node)) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests.trackRequestSync" id="apidoc.element.applicationinsights.ServerRequests.trackRequestSync">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.</span>trackRequestSync
        <span class="apidocSignatureSpan">(client, request, response, ellapsedMilliseconds, properties, error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trackRequestSync = function (client, request, response, ellapsedMilliseconds, properties, error) {
    if (!request || !response || !client) {
        Logging.info(&#x22;AutoCollectServerRequests.trackRequestSync was called with invalid parameters: &#x22;, !request, !response, !client
);
        return;
    }
    AutoCollectServerRequests.addResponseIKeyHeader(client, response);
    // store data about the request
    var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();
    var requestParser = new ServerRequestParser(request, (correlationContext &#x26;&#x26; correlationContext.operation.parentId) || Util.newGuid
());
    // Overwrite correlation context with request parser results
    if (correlationContext) {
        correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;
        correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.
name;
        correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;
    }
    AutoCollectServerRequests.endRequest(client, requestParser, request, response, ellapsedMilliseconds, properties, error);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    metrics.properties = properties;
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;MetricData&#x22;;
    data.baseData = metrics;
    this.track(data);
};
Client.prototype.trackRequestSync = function (request, response, ellapsedMilliseconds, properties, error) {
    ServerRequestTracking.<span class="apidocCodeKeywordSpan">trackRequestSync</span>(this, request, response, ellapsedMilliseconds
, properties, error);
};
Client.prototype.trackRequest = function (request, response, properties) {
    ServerRequestTracking.trackRequest(this, request, response, properties);
};
Client.prototype.trackDependencyRequest = function (requestOptions, request, properties) {
    ClientRequestTracking.trackRequest(this, requestOptions, request, properties);
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.ServerRequests.prototype" id="apidoc.module.applicationinsights.ServerRequests.prototype">module applicationinsights.ServerRequests.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests.prototype._generateCorrelationContext" id="apidoc.element.applicationinsights.ServerRequests.prototype._generateCorrelationContext">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>_generateCorrelationContext
        <span class="apidocSignatureSpan">(requestParser)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_generateCorrelationContext = function (requestParser) {
    if (!this._isAutoCorrelating) {
        return;
    }
    return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getRequestId(), requestParser
.getOperationName(this._client.context.tags), requestParser.getOperationId(this._client.context.tags));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this._isInitialized = true;
var originalHttpServer = http.createServer;
http.createServer = function (onRequest) {
    // todo: get a pointer to the server so the IP address can be read from server.address
    return originalHttpServer(function (request, response) {
        // Set up correlation context
        var requestParser = new ServerRequestParser(request);
        var correlationContext = _this.<span class="apidocCodeKeywordSpan">_generateCorrelationContext</span>(requestParser);
        CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {
            if (_this._isEnabled) {
                // Auto collect request
                AutoCollectServerRequests.trackRequest(_this._client, request, response, null, requestParser);
            }
            if (typeof onRequest === &#x22;function&#x22;) {
                onRequest(request, response);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests.prototype._initialize" id="apidoc.element.applicationinsights.ServerRequests.prototype._initialize">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>_initialize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_initialize = function () {
    var _this = this;
    this._isInitialized = true;
    var originalHttpServer = http.createServer;
    http.createServer = function (onRequest) {
        // todo: get a pointer to the server so the IP address can be read from server.address
        return originalHttpServer(function (request, response) {
            // Set up correlation context
            var requestParser = new ServerRequestParser(request);
            var correlationContext = _this._generateCorrelationContext(requestParser);
            CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {
                if (_this._isEnabled) {
                    // Auto collect request
                    AutoCollectServerRequests.trackRequest(_this._client, request, response, null, requestParser);
                }
                if (typeof onRequest === &#x22;function&#x22;) {
                    onRequest(request, response);
                }
            });
        });
    };
    var originalHttpsServer = https.createServer;
    https.createServer = function (options, onRequest) {
        return originalHttpsServer(options, function (request, response) {
            // Set up correlation context
            var requestParser = new ServerRequestParser(request);
            var correlationContext = _this._generateCorrelationContext(requestParser);
            CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {
                if (_this._isEnabled) {
                    AutoCollectServerRequests.trackRequest(_this._client, request, response, null, requestParser);
                }
                if (typeof onRequest === &#x22;function&#x22;) {
                    onRequest(request, response);
                }
            });
        });
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    AutoCollectClientRequests.INSTANCE = this;
    this._client = client;
}
AutoCollectClientRequests.prototype.enable = function (isEnabled) {
    this._isEnabled = isEnabled;
    if (this._isEnabled &#x26;&#x26; !this._isInitialized) {
        this.<span class="apidocCodeKeywordSpan">_initialize</span>();
    }
};
AutoCollectClientRequests.prototype.isInitialized = function () {
    return this._isInitialized;
};
AutoCollectClientRequests.prototype._initialize = function () {
    var _this = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests.prototype.dispose" id="apidoc.element.applicationinsights.ServerRequests.prototype.dispose">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>dispose
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dispose = function () {
    AutoCollectServerRequests.INSTANCE = null;
    this._isInitialized = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests.prototype.enable" id="apidoc.element.applicationinsights.ServerRequests.prototype.enable">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>enable
        <span class="apidocSignatureSpan">(isEnabled)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">enable = function (isEnabled) {
    this._isEnabled = isEnabled;
    // Autocorrelation requires automatic monitoring of incoming server requests
    // Disabling autocollection but enabling autocorrelation will still enable
    // request monitoring but will not produce request events
    if ((this._isAutoCorrelating || this._isEnabled) &#x26;&#x26; !this._isInitialized) {
        this.useAutoCorrelation(this._isAutoCorrelating);
        this._initialize();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if ((this._isAutoCorrelating || this._isEnabled) &#x26;&#x26; !this._isInitialized) {
        this.useAutoCorrelation(this._isAutoCorrelating);
        this._initialize();
    }
};
AutoCollectServerRequests.prototype.useAutoCorrelation = function (isEnabled) {
    if (isEnabled &#x26;&#x26; !this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.<span class="apidocCodeKeywordSpan">enable</span>();
    }
    else if (!isEnabled &#x26;&#x26; this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.disable();
    }
    this._isAutoCorrelating = isEnabled;
};
AutoCollectServerRequests.prototype.isInitialized = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests.prototype.isAutoCorrelating" id="apidoc.element.applicationinsights.ServerRequests.prototype.isAutoCorrelating">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>isAutoCorrelating
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isAutoCorrelating = function () {
    return this._isAutoCorrelating;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests.prototype.isInitialized" id="apidoc.element.applicationinsights.ServerRequests.prototype.isInitialized">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>isInitialized
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isInitialized = function () {
    return this._isInitialized;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.ServerRequests.prototype.useAutoCorrelation" id="apidoc.element.applicationinsights.ServerRequests.prototype.useAutoCorrelation">
        function <span class="apidocSignatureSpan">applicationinsights.ServerRequests.prototype.</span>useAutoCorrelation
        <span class="apidocSignatureSpan">(isEnabled)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">useAutoCorrelation = function (isEnabled) {
    if (isEnabled &#x26;&#x26; !this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.enable();
    }
    else if (!isEnabled &#x26;&#x26; this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.disable();
    }
    this._isAutoCorrelating = isEnabled;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
AutoCollectServerRequests.prototype.enable = function (isEnabled) {
    this._isEnabled = isEnabled;
    // Autocorrelation requires automatic monitoring of incoming server requests
    // Disabling autocollection but enabling autocorrelation will still enable
    // request monitoring but will not produce request events
    if ((this._isAutoCorrelating || this._isEnabled) &#x26;&#x26; !this._isInitialized) {
        this.<span class="apidocCodeKeywordSpan">useAutoCorrelation</span>(this._isAutoCorrelating);
        this._initialize();
    }
};
AutoCollectServerRequests.prototype.useAutoCorrelation = function (isEnabled) {
    if (isEnabled &#x26;&#x26; !this._isAutoCorrelating) {
        CorrelationContextManager_1.CorrelationContextManager.enable();
    }
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.applicationinsights.Util" id="apidoc.module.applicationinsights.Util">module applicationinsights.Util</a></h1>


    <h2>
        <a href="#apidoc.element.applicationinsights.Util.Util" id="apidoc.element.applicationinsights.Util.Util">
        function <span class="apidocSignatureSpan">applicationinsights.</span>Util
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Util() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Util.canIncludeCorrelationHeader" id="apidoc.element.applicationinsights.Util.canIncludeCorrelationHeader">
        function <span class="apidocSignatureSpan">applicationinsights.Util.</span>canIncludeCorrelationHeader
        <span class="apidocSignatureSpan">(client, requestUrl)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">canIncludeCorrelationHeader = function (client, requestUrl) {
    var excludedDomains = client &#x26;&#x26; client.config &#x26;&#x26; client.config.correlationHeaderExcludedDomains;
    if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {
        return true;
    }
    for (var i = 0; i &#x3c; excludedDomains.length; i++) {
        var regex = new RegExp(excludedDomains[i].replace(/\./g, &#x22;\.&#x22;).replace(/\*/g, &#x22;.*&#x22;));
        if (regex.test(url.parse(requestUrl).hostname)) {
            return false;
        }
    }
    return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
var requestParser = new ClientRequestParser(requestOptions, request);
// Add the source ikey hash to the request headers, if a value was not already provided.
// The getHeader/setHeader methods aren&#x27;t available on very old Node versions, and
// are not included in the v0.10 type declarations currently used. So check if the
// methods exist before invoking them.
if (client.config &#x26;&#x26; client.config.instrumentationKeyHash &#x26;&#x26;
    Util.<span class="apidocCodeKeywordSpan">canIncludeCorrelationHeader</span>(client, requestParser.getUrl()) &#x26;&#x26;
    request[&#x27;getHeader&#x27;] &#x26;&#x26; request[&#x27;setHeader&#x27;] &#x26;&#x26;
    !request[&#x27;getHeader&#x27;](RequestResponseHeaders.sourceInstrumentationKeyHeader)) {
    request[&#x27;setHeader&#x27;](RequestResponseHeaders.sourceInstrumentationKeyHeader, client.config.instrumentationKeyHash);
}
// Collect dependency telemetry about the request when it finishes.
if (request.on) {
    request.on(&#x27;response&#x27;, function (response) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Util.getCookie" id="apidoc.element.applicationinsights.Util.getCookie">
        function <span class="apidocSignatureSpan">applicationinsights.Util.</span>getCookie
        <span class="apidocSignatureSpan">(name, cookie)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getCookie = function (name, cookie) {
    var value = &#x22;&#x22;;
    if (name &#x26;&#x26; name.length &#x26;&#x26; typeof cookie === &#x22;string&#x22;) {
        var cookieName = name + &#x22;=&#x22;;
        var cookies = cookie.split(&#x22;;&#x22;);
        for (var i = 0; i &#x3c; cookies.length; i++) {
            var cookie = cookies[i];
            cookie = Util.trim(cookie);
            if (cookie &#x26;&#x26; cookie.indexOf(cookieName) === 0) {
                value = cookie.substring(cookieName.length, cookies[i].length);
                break;
            }
        }
    }
    return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        ip = &#x22;127.0.0.1&#x22;;
    }
    return ip;
};
ServerRequestParser.prototype._getId = function (name) {
    var cookie = (this.rawHeaders &#x26;&#x26; this.rawHeaders[&#x22;cookie&#x22;] &#x26;&#x26;
        typeof this.rawHeaders[&#x22;cookie&#x22;] === &#x27;string&#x27; &#x26;&#x26; this.rawHeaders[&#x22;cookie&#x22;]) || &#
x22;&#x22;;
    var value = ServerRequestParser.parseId(Util.<span class="apidocCodeKeywordSpan">getCookie</span>(name, cookie));
    return value;
};
ServerRequestParser.parseId = function (cookieValue) {
    return cookieValue.substr(0, cookieValue.indexOf(&#x27;|&#x27;));
};
ServerRequestParser.keys = new ContractsModule.Contracts.ContextTagKeys();
return ServerRequestParser;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Util.int32ArrayToBase64" id="apidoc.element.applicationinsights.Util.int32ArrayToBase64">
        function <span class="apidocSignatureSpan">applicationinsights.Util.</span>int32ArrayToBase64
        <span class="apidocSignatureSpan">(array)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">int32ArrayToBase64 = function (array) {
    var toChar = function (v, i) {
        return String.fromCharCode((v &#x3e;&#x3e; i) &#x26; 0xFF);
    };
    var int32AsString = function (v) {
        return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);
    };
    var x = array.map(int32AsString).join(&#x22;&#x22;);
    var s = new Buffer(x, &#x22;binary&#x22;).toString(&#x22;base64&#x22;);
    return s.substr(0, s.indexOf(&#x22;=&#x22;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Util.isArray" id="apidoc.element.applicationinsights.Util.isArray">
        function <span class="apidocSignatureSpan">applicationinsights.Util.</span>isArray
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isArray = function (obj) {
    return Object.prototype.toString.call(obj) === &#x22;[object Array]&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    exception.measurements = measurements;
    exception.exceptions = [];
    var stack = error[&#x22;stack&#x22;];
    var exceptionDetails = new ContractsModule.Contracts.ExceptionDetails();
    exceptionDetails.message = error.message;
    exceptionDetails.typeName = error.name;
    exceptionDetails.parsedStack = this.parseStack(stack);
    exceptionDetails.hasFullStack = Util.<span class="apidocCodeKeywordSpan">isArray</span>(exceptionDetails.parsedStack) &#x26;&#
x26; exceptionDetails.parsedStack.length &#x3e; 0;
    exception.exceptions.push(exceptionDetails);
    var data = new ContractsModule.Contracts.Data();
    data.baseType = &#x22;Microsoft.ApplicationInsights.ExceptionData&#x22;;
    data.baseData = exception;
    return data;
};
AutoCollectExceptions.parseStack = function (stack) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Util.isDate" id="apidoc.element.applicationinsights.Util.isDate">
        function <span class="apidocSignatureSpan">applicationinsights.Util.</span>isDate
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isDate = function (obj) {
    return Object.prototype.toString.call(obj) === &#x22;[object Date]&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Util.isError" id="apidoc.element.applicationinsights.Util.isError">
        function <span class="apidocSignatureSpan">applicationinsights.Util.</span>isError
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isError = function (obj) {
    return obj instanceof Error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Log an exception you have caught.
 * @param   exception   An Error from a catch clause, or the string error message.
 * @param   properties  map[string, string] - additional data used to filter events and metrics in the portal. Defaults to empty
.
 * @param   measurements    map[string, number] - metrics associated with this event, displayed in Metrics Explorer on the portal
. Defaults to empty.
 */
Client.prototype.trackException = function (exception, properties, measurements) {
    if (!Util.<span class="apidocCodeKeywordSpan">isError</span>(exception)) {
        exception = new Error(exception);
    }
    var data = ExceptionTracking.getExceptionData(exception, true, properties, measurements);
    this.track(data);
};
/**
 * * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators
.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Util.msToTimeSpan" id="apidoc.element.applicationinsights.Util.msToTimeSpan">
        function <span class="apidocSignatureSpan">applicationinsights.Util.</span>msToTimeSpan
        <span class="apidocSignatureSpan">(totalms)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">msToTimeSpan = function (totalms) {
    if (isNaN(totalms) || totalms &#x3c; 0) {
        totalms = 0;
    }
    var ms = &#x22;&#x22; + totalms % 1000;
    var sec = &#x22;&#x22; + Math.floor(totalms / 1000) % 60;
    var min = &#x22;&#x22; + Math.floor(totalms / (1000 * 60)) % 60;
    var hour = &#x22;&#x22; + Math.floor(totalms / (1000 * 60 * 60)) % 24;
    var days = Math.floor(totalms / (1000 * 60 * 60 * 24));
    ms = ms.length === 1 ? &#x22;00&#x22; + ms : ms.length === 2 ? &#x22;0&#x22; + ms : ms;
    sec = sec.length &#x3c; 2 ? &#x22;0&#x22; + sec : sec;
    min = min.length &#x3c; 2 ? &#x22;0&#x22; + min : min;
    hour = hour.length &#x3c; 2 ? &#x22;0&#x22; + hour : hour;
    var daysText = days &#x3e; 0 ? days + &#x22;.&#x22; : &#x22;&#x22;;
    return daysText + hour + &#x22;:&#x22; + min + &#x22;:&#x22; + sec + &#x22;.&#x22; + ms;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
else {
    remoteDependency.type = ContractsModule.Contracts.RemoteDependencyDataConstants.TYPE_HTTP;
    remoteDependency.target = urlObject.hostname;
}
remoteDependency.name = dependencyName;
remoteDependency.data = this.url;
remoteDependency.duration = Util.<span class="apidocCodeKeywordSpan">msToTimeSpan</span>(this.duration);
remoteDependency.success = this._isSuccess();
remoteDependency.resultCode = this.statusCode ? this.statusCode.toString() : null;
remoteDependency.properties = this.properties || {};
var data = new ContractsModule.Contracts.Data();
data.baseType = &#x22;Microsoft.ApplicationInsights.RemoteDependencyData&#x22;;
data.baseData = remoteDependency;
return data;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Util.newGuid" id="apidoc.element.applicationinsights.Util.newGuid">
        function <span class="apidocSignatureSpan">applicationinsights.Util.</span>newGuid
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">newGuid = function () {
    var hexValues = [&#x22;0&#x22;, &#x22;1&#x22;, &#x22;2&#x22;, &#x22;3&#x22;, &#x22;4&#x22;, &#x22;5&#x22;, &#x22;6&#x22;, &#x22;7&#x22;, &#x22;8&#x22;, &#x22;9&#x22;, &#x22;A&#x22;, &#x22;B&#x22;, &#x22;C&#x22;, &#x22;D&#x22;, &#x22;E&#x22;, &#x22;F&#x22;];
    // c.f. rfc4122 (UUID version 4 = xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx)
    var oct = &#x22;&#x22;, tmp;
    for (var a = 0; a &#x3c; 4; a++) {
        tmp = Util.random32();
        oct +=
            hexValues[tmp &#x26; 0xF] +
                hexValues[tmp &#x3e;&#x3e; 4 &#x26; 0xF] +
                hexValues[tmp &#x3e;&#x3e; 8 &#x26; 0xF] +
                hexValues[tmp &#x3e;&#x3e; 12 &#x26; 0xF] +
                hexValues[tmp &#x3e;&#x3e; 16 &#x26; 0xF] +
                hexValues[tmp &#x3e;&#x3e; 20 &#x26; 0xF] +
                hexValues[tmp &#x3e;&#x3e; 24 &#x26; 0xF] +
                hexValues[tmp &#x3e;&#x3e; 28 &#x26; 0xF];
    }
    // &#x22;Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively&#x22;
    var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];
    return oct.substr(0, 8) + &#x22;-&#x22; + oct.substr(9, 4) + &#x22;-4&#x22; + oct.substr(13, 3) + &#x22;-&#x22; + clockSequenceHi + oct.substr(16, 3) + &#x22;-&#x22; +
oct.substr(19, 12);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    return Zone.current.get(&#x22;context&#x22;);
};
/**
 *  A helper to generate objects conforming to the CorrelationContext interface
 */
CorrelationContextManager.generateContextObject = function (parentId, operationName, operationId) {
    operationId = operationId || Util.<span class="apidocCodeKeywordSpan">newGuid</span>();
    parentId = parentId || operationId;
    if (this.enabled) {
        return {
            operation: {
                name: operationName,
                id: operationId,
                parentId: parentId
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Util.random32" id="apidoc.element.applicationinsights.Util.random32">
        function <span class="apidocSignatureSpan">applicationinsights.Util.</span>random32
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">random32 = function () {
    return (0x100000000 * Math.random()) | 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * generate GUID
 */
Util.newGuid = function () {
    var hexValues = [&#x22;0&#x22;, &#x22;1&#x22;, &#x22;2&#x22;, &#x22;3&#x22;, &#x22;4&#x22;, &#x22;5&#x22;, &#x22;6&#x22;, &#
x22;7&#x22;, &#x22;8&#x22;, &#x22;9&#x22;, &#x22;A&#x22;, &#x22;B&#x22;, &#x22;C&#x22;, &#x22;D&#x22;, &#x22;E&#x22;, &#x22;F&#x22
;];
    // c.f. rfc4122 (UUID version 4 = xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx)
    var oct = &#x22;&#x22;, tmp;
    for (var a = 0; a &#x3c; 4; a++) {
        tmp = Util.<span class="apidocCodeKeywordSpan">random32</span>();
        oct +=
            hexValues[tmp &#x26; 0xF] +
                hexValues[tmp &#x3e;&#x3e; 4 &#x26; 0xF] +
                hexValues[tmp &#x3e;&#x3e; 8 &#x26; 0xF] +
                hexValues[tmp &#x3e;&#x3e; 12 &#x26; 0xF] +
                hexValues[tmp &#x3e;&#x3e; 16 &#x26; 0xF] +
                hexValues[tmp &#x3e;&#x3e; 20 &#x26; 0xF] +
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Util.trim" id="apidoc.element.applicationinsights.Util.trim">
        function <span class="apidocSignatureSpan">applicationinsights.Util.</span>trim
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trim = function (str) {
    if (typeof str === &#x22;string&#x22;) {
        return str.replace(/^\s+|\s+$/g, &#x22;&#x22;);
    }
    else {
        return &#x22;&#x22;;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return AutoCollectExceptions;
}());
var _StackFrame = (function () {
function _StackFrame(frame, level) {
    this.sizeInBytes = 0;
    this.level = level;
    this.method = &#x22;&#x3c;no_method&#x3e;&#x22;;
    this.assembly = Util.<span class="apidocCodeKeywordSpan">trim</span>(frame);
    var matches = frame.match(_StackFrame.regex);
    if (matches &#x26;&#x26; matches.length &#x3e;= 5) {
        this.method = Util.trim(matches[2]) || this.method;
        this.fileName = Util.trim(matches[4]) || &#x22;&#x3c;no_filename&#x3e;&#x22;;
        this.line = parseInt(matches[5]) || 0;
    }
    this.sizeInBytes += this.method.length;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.applicationinsights.Util.validateStringMap" id="apidoc.element.applicationinsights.Util.validateStringMap">
        function <span class="apidocSignatureSpan">applicationinsights.Util.</span>validateStringMap
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validateStringMap = function (obj) {
    var map;
    if (typeof obj === &#x22;object&#x22;) {
        map = {};
        for (var field in obj) {
            var property = obj[field];
            var propertyType = typeof property;
            if (propertyType !== &#x22;string&#x22;) {
                if (property != null &#x26;&#x26; typeof property.toString === &#x22;function&#x22;) {
                    property = property.toString();
                }
                else {
                    Logging.info(&#x22;key: &#x22; + field + &#x22;, invalid property type: &#x22; + propertyType);
                    continue;
                }
            }
            map[field] = property.trim(0, Util.MAX_PROPERTY_LENGTH);
        }
    }
    else {
        Logging.info(&#x22;Invalid properties dropped from payload&#x22;);
    }
    return map;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            if (!data.baseData.properties[name]) {
                data.baseData.properties[name] = this.commonProperties[name];
            }
        }
    }
}
// sanitize properties
data.baseData.properties = Util.<span class="apidocCodeKeywordSpan">validateStringMap</span>(data.baseData.properties);
var iKey = this.config.instrumentationKey;
var envelope = new ContractsModule.Contracts.Envelope();
envelope.data = data;
envelope.iKey = iKey;
// this is kind of a hack, but the envelope name is always the same as the data name sans the chars &#x22;data&#x22;
envelope.name =
    &#x22;Microsoft.ApplicationInsights.&#x22; +
...</pre></li>
    </ul>






</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
